;		       ZXAkuma v2.0a by Master Gouken
;======================================================================
;                            Variable Table		
;======================================================================
;			Var(0) :	Old Damage Scaler (Depricated)
;			Var(1) : Intro Decider
;			Var(2) : Special Condition
;			Var(3) : Win Pose Decider
;              Var(4) : Shakunetsu Gou Hadou Resistance
;              Var(5) : Death Voice Add
;              Var(6) : Death Indicator
;			Var(7) : Shin Gouki Indicator
;			Var(8) : Hit Voice Randomizer
;			Var(9) : Mash Manager
;              Var(10): Shakunetsu Indicator
;              Var(11): Gou Hadou Limit
;              Var(12): Tenma Gou Zankuu Resistance*
;              Var(13): Artificial Intellegence
;              Var(14): Shoryuu limit (A.I)
;              Var(15): Messtatsu Gou Hadou Resistance
;              Var(16): Hyper Hadou In Play
;              Var(17): Juggle Manager
;              Var(18): Projectile Hit Detection
;======================================================================
;			Floats
;----------------------------------------------------------------------
;			Fvar(1): Damage Dampener
;			Fvar(5): Cornerpush
;======================================================================
[Data]
life = 900                ;Amount of life to start with
attack = 100              ;Amount of attack power to start with
defence = 100             ;Amount of defensive power to start with
fall.defence_up = 50      ;Amount to raise defence by on fall
liedown.time = 15         ;How long Akuma lies on the ground
airjuggle = 25            ;Number of juggle points
sparkno = 3               ;Default spark number
guard.sparkno = s7006     ;Default spark number
KO.echo = 0               ;Whether there should be an echo upon death
volumescale = 100              ;Pretty much self explanitory
IntPersistIndex = 60      ;Variables with this index and above will not 
FloatPersistIndex = 40    ;have their values reset to 0 between rounds
;====================================================================

[Size]
xscale = 0.83333333333333333333333333333333           ;Horizontal scaling factor.
yscale = 1.0714285714285714285714285714286           ;Vertical scaling factor.
ground.back = 15     ;Player width (back, ground)
ground.front = 16    ;Player width (front, ground)
air.back = 12        ;Player width (back, air)
air.front = 12       ;Player width (front, air)
height = 60          ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = -5, -90   ;Approximate position of head
mid.pos = -5, -60    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 3.2      ;Walk forward 		       33
walk.back = -3     ;Walk backward	              -3.2
run.fwd  = 4.6, 0    ;Run forward (x, y)               5.6
run.back = -4.5,-3.8 ;Hop backward (x, y)              5.5,4.8
jump.neu = 0,-9.0    ;Neutral jumping velocity (x, y) -8.4
jump.back = -3.55    ;Jump back Speed (x, y)           3
jump.fwd = 3.5       ;Jump forward Speed (x, y)        3
runjump.back = -3.55,-9.1 ;Running jump speeds (opt)
runjump.fwd = 5,-9.1      ;.
airjump.neu = 0,-8.1      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.

[Movement]
airjump.num = 0      ;Number of air jumps allowed (opt)
airjump.height = 40  ;Minimum distance from ground before you can air jump (opt)
yaccel = .45         ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching

[Quotes]
Victory1 = "Weak...."

;--------------------------------------------------------------------
; Lose by Time Over
;--------------------------------------------------------------------
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;----------------------------------------------------------------------
; Win state decider
;----------------------------------------------------------------------
[Statedef 180]
type = S

[State 180, Randomizer]
type = varRandom
triggerall = Var(2) = 0
trigger1 = 1
v = 3
range = 1,2

[State 180, ShunGokuEnd]
type = ChangeState
triggerall = Var(2) >= 1
trigger1 = Time = 3
value = 3110

[State 180, Back_Turn]
type = ChangeState
triggerall = Var(2) = 0
trigger1 = Time = 3 && Var(3) = 2
value = 183

[State 180, Stomp]
type = ChangeState
triggerall = Var(2) = 0
trigger1 = Time = 3 && Var(3) = 1
value = 181

;--------------------------------------------------------------------
; Win pose 1 - Stomp
;--------------------------------------------------------------------
[Statedef 181]
type = S
ctrl = 0
anim = ifelse(random > 500,181,182)
velset = 0,0

[State 181, Snd 1]
type = PlaySnd
trigger1 = AnimElem = 5 && anim = 181
value = 50,10
volumescale = 100

[State 181, Snd 1]
type = PlaySnd
trigger1 = Time = 15 && anim = 182
value = 50,6
volumescale = 100

[State 181, Stomp]
type = PlaySnd
trigger1 = Time = 15
value = 122,10
volumescale = 100

[State 181, Rumble]
type  = envshake
trigger1 = Time = 15
freq  = 120
time  = 30
ampl  = -4

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;--------------------------------------------------------------------
; Win pose 2 - Back Turn
;--------------------------------------------------------------------
[Statedef 183]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 183, Ten]
type = explod
trigger1 = animelem = 3 && facing = 1 && Var(7) = 0
anim = 191
postype = p1
pos = 1,-8
sprpriority = 4

[State 183, Shin]
type = explod
trigger1 = animelem = 3 && facing = 1 && Var(7) = 1
anim = 198
postype = p1
pos = 1,-7
sprpriority = 4

[State 183, Ten(Turn)]
type = explod
trigger1 = animelem = 3 && facing = -1 && Var(7) = 0
anim = 192
postype = p1
pos = -2,-9
sprpriority = 4

[State 183, Shin(Turn)]
type = explod
trigger1 = animelem = 3 && facing = -1 && Var(7) = 1
anim = 199
postype = p1
pos = -2,-7
sprpriority = 4

[State 183, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;--------------------------------------------------------------------
; Intro Decider
;--------------------------------------------------------------------
[Statedef 191]
type = S

[State -3,Shin Gouki]
type = Varset
trigger1 = Palno > 6
v = 7
value = 1

[State 191, 1]
type = ChangeState
trigger1 = Time = 0
value = ifelse(var(7)=0,192,193)

;--------------------------------------------------------------------
;Intro 1 (Stomp)
;--------------------------------------------------------------------
[Statedef 192]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Snd 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 50,10
volumescale = 100

[State 191, Snd 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 122,10
volumescale = 100

[State 191, Rumble]
type  = envshake
trigger1 = animelem = 5
freq  = 120
time  = 30
ampl  = -4

[State 191, 3]
type = ChangeState
trigger1 = time > 168
value = 0

;--------------------------------------------------------------------
;Intro 2 (Stomp -Shin)
;--------------------------------------------------------------------
[Statedef 193]
type = S
ctrl = 0
anim = 189
velset = 0,0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 189

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Snd 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 50,6
volumescale = 100

[State 191, Snd 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 122,10
volumescale = 100

[State 191, Rumble]
type  = envshake
trigger1 = animelem = 5
freq  = 120
time  = 30
ampl  = -4

[State 191, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0

;--------------------------------------------------------------------
; Taunt
;--------------------------------------------------------------------
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, Snd 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 50,10
volumescale = 100

[State 195, Shin Toggle]
type = varset
trigger1 = !time
var(7) = ifelse(var(7) =0,1,0)

[State 195, Snd 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 122,10
volumescale = 100

[State 195, Rumble]
type  = envshake
trigger1 = animelem = 5
freq  = 120
time  = 30
ampl  = -4

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Stand Light Punch
;----------------------------------------------------------------------
[Statedef 200]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 12 
velset = 0,0                     
ctrl = 0                         
anim = 200                      
poweradd = 20                    
sprpriority = 2

[State 200, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 200, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA
Damage = 23,0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
forcenofall = 1
sparkno = S7000
sparkxy = -15, -76
hitsound = s120, 4
guardsound = s5, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 11
guard.hittime = 11
guard.ctrltime = 9
;guard.slidetime = 5
ground.velocity = -5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -3.4,-5
air.hittime = 12
yaccel = 0.45
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Standing Medium punch
;----------------------------------------------------------------------
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 12
poweradd= 65
ctrl = 0
velset = 0,0
anim = ifelse(p2dist x >= 40,210,211)
sprpriority = -1

[State 210, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1


[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 3

[State 210, Far]
type = HitDef
trigger1 = AnimElem = 3 && anim = 210
attr = S, NA
animtype  = Medium
Damage = 57,0
guardflag = MA
pausetime = 10,10
forcenofall = 1
sparkno = S7001
sparkxy = -15,-75
hitsound   = s120,5
guardsound = s5,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 18
ground.velocity = -6.5
air.velocity = -4,-4.5
yaccel = 0.47
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 210, Close]
type = HitDef
trigger1 = AnimElem = 3 && anim = 211
attr = S, NA
animtype  = Medium
Damage = 57,0
guardflag = MA
pausetime = 10,10
forcenofall = 1
sparkno = S7001
sparkxy = -20,-55
hitsound   = s120,5
guardsound = s5,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 14
guard.ctrltime = 9
ground.velocity = -4
air.velocity = -3.2,-5
yaccel = 0.45
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 210, HitAnimElem]
type = ChangeAnim
triggerall = anim = 211
trigger1 = MoveContact = 1 && HitPauseTime
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) <= 0
trigger1 = HitPauseTime <= 8
value = 211
elem = 4
ignoreHitPause = 1

[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Command Overhead
;----------------------------------------------------------------------
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 10
poweradd= 65
ctrl = 0
velset = 0,0
anim = 611
sprpriority = 5

[State 215, VelX]
type = velset
trigger1 = animelem = 4
x = 6

[State 215, stop]
type = velset
trigger1 = animelem = 7
x = 0

[State 210, hit1]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
Damage = 20,0
guardflag = MA
pausetime = 10,10
sparkno = S7001
sparkxy = -15,-75
hitsound   = s120,5
guardsound = s5,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6.5
air.velocity = -4,-4.5
yaccel = 0.47
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 210, hit2]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
animtype  = Medium
Damage = 57,0
guardflag = MA
pausetime = 10,10
sparkno = S7001
sparkxy = -20,-55
hitsound   = s120,5
guardsound = s5,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7.5
air.velocity = -3.2,-5
yaccel = 0.45
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 215, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Standing Strong punch
;----------------------------------------------------------------------
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 12
poweradd= 65
ctrl = 0
velset = 0,0
anim = ifelse(p2dist X >= 40,220,221)
sprpriority = -1

[State 220, Voice]
type = PlaySnd
trigger1 = AnimElem = 4 && Random <= 400 && anim = 220
value = 50, 11
volumescale = 100

[State 220, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 400 && anim = 221
value = 50, 11
volumescale = 100

[State 220, 1]
type = PlaySnd
trigger1 = AnimElem = 4 && anim = 220
value = 0, 4

[State 220, 1]
type = PlaySnd
trigger1 = AnimElem = 2 && anim = 221
value = 0, 4

[State 220, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 220, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
Damage = 62,0
guardflag = MA
pausetime = 12,12
sparkno = S7002
sparkxy = -17,-65
hitsound   = s120,6
guardsound = s5,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 22
guard.ctrltime = 12
ground.velocity = -7.5
air.velocity = ifelse(anim = 220,-6,-1.7),ifelse(anim = 220,-4.8,-8.2)
envshake.time = ifelse(anim = 220,8,0)
airguard.velocity = ifelse(anim = 220, -4.7,-1.7),ifelse(anim = 220,-4.4,-8.2)
envshake.ampl = 2
envshake.freq = 120
yaccel = 0.47
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 200, HitAnimElem]
type = ChangeAnim
triggerall = anim = 221
trigger1 = MoveContact = 1 && HitPauseTime
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) <= 0
trigger1 = HitPauseTime <= 10
value = 221
elem = 3
ignoreHitPause = 1

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Standing Light Kick
;----------------------------------------------------------------------
[Statedef 300]
type    = S
movetype= A
physics = S
juggle  = 12
poweradd= 22
ctrl = 0
velset = 0,0
anim = 300
sprpriority = 2

[State 300, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 300, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 300, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 26,0
guardflag = MA
pausetime = 8,8
sparkno = S7000
sparkxy = -10,-20
hitsound   = s120,7
guardsound = s5,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 14
guard.ctrltime = 14
ground.velocity = -5
air.velocity = -2.8,-3.7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 300, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Standing Medium Kick
;----------------------------------------------------------------------
[Statedef 310]
type    = S
movetype= A
physics = S
juggle  = 12
poweradd= 65
ctrl = 0
velset = 0,0
anim = ifelse(p2dist x >= 50,310,312)
sprpriority = 2

[State 310, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1


[State 310, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 4

[State 310, 2]
type = HitDef
trigger1 = Time = 0 && Anim = 310
attr = S, NA
animtype  = Medium
damage    = 63,0
guardflag = MA
pausetime = 10,10
sparkno = S7001
sparkxy = -10,-15
hitsound   = s120,8
guardsound = s5,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -5.2
air.velocity = -4.4,-4.1
yaccel = 0.45
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 310, 2]
type = HitDef
trigger1 = Time = 0 && Anim = 312
attr = S, NA
animtype  = Medium
damage    = 63,0
guardflag = MA
pausetime = 10,10
sparkno = S7001
sparkxy = -25,-50
hitsound   = s120,8
guardsound = s5,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -3.6,-4.2
yaccel = 0.45
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 310, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Hop Kick
;----------------------------------------------------------------------
[Statedef 315]
type    = S
movetype= A
physics = N
juggle  = 5
poweradd= 65
ctrl = 0
velset = 0,0
anim = 315
sprpriority = 2

[State 315, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 315, Voice]
type = PlaySnd
trigger1 = Time = 6
value = 50, 1
volumescale = 100
channel = 1

[State 315, Jump]
type = velset
trigger1 = animelem = 2
X = 4
Y = -5.4

[State 315, Gravity]
type = veladd
trigger1 = animelemtime(2) > 0
Y = 0.30

[State 315, AirType]
type = statetypeset
trigger1 = AnimElemTime(2) >= 2
Statetype = A
Physics = A

[State 315, Decend]
type = velset
trigger1 = animelem = 6
X = 2.2 ;1.8
Y = 2.1

[State 315, 1]
type = PlaySnd
trigger1 = Time = 5
value = 0, 4

[State 315, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
guardflag = H
animtype  = Hard
damage    = 37,0
guardflag = MA
pausetime = 10,10
sparkno = S7001
sparkxy = -15,-60
hitsound   = s120,8
guardsound = s5,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 6
guard.ctrltime = 1
ground.velocity = -3.2
guard.velocity = -7.5
air.velocity = -2.2,-3.2

[State 315, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----------------------------------------------------------------------
; Standing Strong Kick
;----------------------------------------------------------------------
[Statedef 320]
type    = S
movetype= A
physics = S
juggle  = 12
poweradd= 65
ctrl = 0
velset = 0,0
anim = ifelse(p2dist x >= 40,320,321)
sprpriority = 2

[State 320, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1


[State 320, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 4

[State 320, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 32,0
guardflag = MA
pausetime = 11,12
sparkno = S7002
sparkxy = ifelse(anim=321,-18,-10),ifelse(anim=321,-69,-75)
hitsound   = s120,9
guardsound = s5,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 15
ground.velocity = ifelse(anim = 321,-7, -9),0
air.velocity = ifelse(anim = 321,-2.2,-3.7), ifelse(anim = 321,-3.2,-7)
yaccel = 0.6
fall.envshake.time = 15
fall.envshake.freq = 176
fall.envshake.ampl = 3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 320, 2]
type = HitDef
trigger1 = Animelem = 5
attr = S, NA
animtype  = Medium
damage    = 20,0
guardflag = MA
pausetime = 12,12
sparkno = S7002
sparkxy = -10,-10
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -2.2,15
fall = ifelse(enemynear, Pos Y < 0 || enemynear, Statetype = A,1,0)
fall.envshake.time = 15
fall.envshake.freq = 176
fall.envshake.ampl = 3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 320, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----------------------------------------------------------------------
;Crouching light punch
;----------------------------------------------------------------------
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = 400
sprpriority = 2

[State 400, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 23,0
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 8,8
sparkno = S7000
sparkxy = -10,-42
hitsound   = s120,4
guardsound = s5,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 6
ground.velocity = -4
air.velocity = -1.5,-3
fall.envshake.time = 15
fall.envshake.freq = 176
fall.envshake.ampl = 3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 400, 3]
type = CtrlSet
trigger1 = Time = 5
value = 1

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;----------------------------------------------------------------------
;Crouching Medium Punch
;----------------------------------------------------------------------
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 410
sprpriority = 2

[State 410, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 410, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 410, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage = 37,0
animtype  = Medium
hitflag = MAF
guardflag = M
pausetime = 10,10
sparkno = S7001
sparkxy = -10,-55
hitsound   = s120,5
guardsound = s5,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.ctrltime = 3
ground.velocity = -4
air.velocity = -3,-4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;----------------------------------------------------------------------
;Crouching Strong Punch
;----------------------------------------------------------------------
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 420
sprpriority = 2

[State 420, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 420, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 420, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 42,0
animtype  = Medium
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = S7002
sparkxy = -10,-63
hitsound   = s120,6
guardsound = s5,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 21
ground.velocity = -9
air.velocity = -3,-6
yaccel = 0.45
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 2
envshake.freq = 176

[State 210, HitAnimElem]
type = ChangeAnim
trigger1 = MoveContact = 1 && HitPauseTime
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) <= 0
trigger1 = HitPauseTime <= 8
value = 420
elem = 4
ignoreHitPause = 1

[State 420, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;----------------------------------------------------------------------
;Crouching light kick
;----------------------------------------------------------------------
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 22
ctrl = 0
anim = 430
sprpriority = 2

[State 430, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 430, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 430, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 28,0
animtype  = Light
hitflag = MA
guardflag = L
pausetime = 8,8
sparkno = S7000
sparkxy = -10,-8
hitsound   = s120,7
guardsound = s5,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
guard.ctrltime = 8
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;--------------------------------------------------------------------
;Crouch Medium Kick
;--------------------------------------------------------------------
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 440
sprpriority = 2

[State 440, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 440, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 30,0
hitflag = MA
guardflag = L
pausetime = 10,10
SPARKNO = S7001
sparkxy = -5,-10
hitsound   = s120,8
guardsound = s5,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
guard.ctrltime = 9
ground.velocity = -5.2,0
air.velocity = -3.2,-3
guard.velocity = -5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;----------------------------------------------------------------------
;Crouch Strong Kick
;----------------------------------------------------------------------
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 450
sprpriority = 2

[State 450, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 450, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 450, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 32,0
hitflag = MA
guardflag = L
pausetime = 12,12
sparkno = S7002
sparkxy = -5,-15
hitsound   = s120,9
guardsound = s5,0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = 0,-6
air.velocity = 0,-6
guard.velocity = -5
fall = 1
yaccel =0.45
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 450, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;----------------------------------------------------------------------
;Jump Light Punch
;----------------------------------------------------------------------
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0
anim = 600
sprpriority = 2

[State 600, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 20,0
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = S7000
sparkxy = -10,-58
hitsound   = s120,4
guardsound = s5,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 11
guard.ctrltime = 9
ground.velocity = -4
air.velocity = -1.3,-3

[State 600, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

;--------------------------------------------------------------------
;Jump Medium Punch
;--------------------------------------------------------------------
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 610
sprpriority = 2

[State 610, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 72,0
guardflag = HA
priority = 4
pausetime = 8,8
sparkno = S7001
sparkxy = -10,-55
hitsound   = s120,5
guardsound = s5,0
animtype = Medium
ground.type = High
ground.slidetime = 17
ground.hittime  = 10
guard.ctrltime = 9
ground.velocity = -5
air.velocity = -3,-2

;--------------------------------------------------------------------
;Jump Hard Punch
;--------------------------------------------------------------------
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 620
sprpriority = 2

[State 620, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 620, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 620, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 80,0
guardflag = HA
priority = 4
pausetime = 8,8
sparkno = S7002
sparkxy = -10,-55
hitsound   = s120,6
guardsound = s5,0
animtype = Hard
ground.type = High
ground.slidetime = 17
ground.hittime  = 10
guard.ctrltime = 7
ground.velocity = -7
air.velocity = -3.2,-5.7
yaccel = 0.5

;--------------------------------------------------------------------
;Jump Light Kick
;--------------------------------------------------------------------
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 20
ctrl = 0
anim = ifelse(Vel X = 0,630,660)
sprpriority = 2

[State 630, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 630, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 630, 2]
type = HitDef
trigger1 = Time = 0 && anim = 660
attr = A, NA
damage = 26,0
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = S7000
sparkxy = -5,-35
hitsound   = s120,7
guardsound = s5,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 11
guard.ctrltime = 9
ground.velocity = -4
air.velocity = -2,-3

[State 630, 2]
type = HitDef
trigger1 = Time = 0 && anim = 630
attr = A, NA
damage = 26,0
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = S7000
sparkxy = -5,-35
hitsound   = s120,7
guardsound = s5,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4,0
air.velocity = -2,-4.7

;--------------------------------------------------------------------
;Jump Medium Kick
;--------------------------------------------------------------------
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = ifelse(Vel X = 0,630,670)
sprpriority = 2

[State 640, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 640, 3]
type = HitDef
trigger1 = Time = 0 && anim = 670
attr = A, NA
damage = 70,0
guardflag = HA
priority = 4
pausetime = 8,8
sparkno = S7001
sparkxy = -10,-40
hitsound   = s120,8
guardsound = s5,0
animtype = Medium
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = -3,-4

[State 640, 2]
type = HitDef
trigger1 = Time = 0 && anim = 630
attr = A, NA
damage = 70,0
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = S7001
sparkxy = -5,-35
hitsound   = s120,8
guardsound = s5,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4,0
air.velocity = -2,-4.7
;--------------------------------------------------------------------
;Jump Strong Kick
;--------------------------------------------------------------------
[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = ifelse(Vel X = 0,650,680)
sprpriority = 2

[State 650, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 650, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 650, 2]
type = HitDef
trigger1 = Time = 0 && anim = 650
attr = A, NA
damage = 70,0
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = S7002
sparkxy = -5,-35
hitsound   = s120,9
guardsound = s5,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -5,0
air.velocity = -3.5,-1.6

[State 650, 3]
type = HitDef
trigger1 = Time = 0 && anim = 680
attr = A, NA
damage = 70,0
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = S7002
sparkxy = -10,-40
hitsound   = s120,9
guardsound = s5,0
animtype = Medium
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = -5.3,-4
yaccel = 0.5
;----------------------------------------------------------------------
;Over Head Throw
;----------------------------------------------------------------------
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
hitflag = M
priority = 3, Miss
sparkno = -1
p1facing = ifelse (command = "holdfwd", -1, 1)
p2facing = 1 
p1stateno = 810
p2stateno = 820
guard.dist = 0
fall = 1 

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
;Over Head Throw - Throwing the opponent
;----------------------------------------------------------------------
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 60

[State 810, Grab Sound]
type = PlaySnd
trigger1 = Time = 0
value = 110, 0
volumescale = 100
freqmul = 1.5

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(1) >= 0 && animelemtime(2) < 0
pos = 30,0

[State 810, behind]
type = sprpriority
trigger1 = animelem = 2
value = -3

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && animelemtime(3) < 0
pos = 30, -90

[State 810, infornt]
type = sprpriority
trigger1 = animelem = 3
value = 5

[State 810, Bind 2-4]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && animelemtime(4) < 0
pos = -15, -95

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(4) >= 0 && animelemtime(5) < 0
pos = -40, -50

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = -78

[State 810, Throw 11]
type = TargetState
trigger1 = AnimElem=5
value = 821

[State 810, CornerPush]
type = posadd
trigger1 = animelemtime(5) >= 0 && target,frontedgebodydist <=10 && p2dist x > -140
x = 10

[State 810, Voice]
type = playsnd
trigger1 = animelem = 3
value = 50,10
channel = 1
volumescale = 100


[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
;Thrown
;----------------------------------------------------------------------
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

[State 811, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;----------------------------------------------------------------------
;Thrown into air
;----------------------------------------------------------------------
[Statedef 821]
type    = A
movetype= H
physics = N
poweradd = 40

[State 821, Furiizu]
type = posfreeze
trigger1 = time<3
value = 3

[State 821, Velset]
type = velset
trigger1 = time = 3
x = 5
y = -5

[State 821, infront]
type = sprpriority
trigger1 = animelem = 2
value = 3

[State 821, Posset]
type = posset
trigger1 = time = 3
y = -13

[State 821, Posadd]
type = posadd
trigger1 = !time
x = 20

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .5

[State 831, Rumble]
type  = envshake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -0
freq  = 120
time  = 5
ampl  = -3

[State 821, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 821, 3] ; Recover in mid air (use SelfState)
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 821, Life-]
type = lifeadd
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = -15

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground
;====================================================================
;			     Special Moves
;--------------------------------------------------------------------
; Gou Hadou (Weak)
;--------------------------------------------------------------------
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = ifelse(Var(7) = 0,1000,1010)
ctrl = 0
sprpriority = 2

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 4 && time < 14
value = 50, 10
volumescale = 100
channel = 1

[State 1000, Effect]
type = PlaySnd
trigger1 = AnimElem = 4 && time < 14
value = 122,7
volumescale = 100

[State 1000, Hadouken]
type = Helper
trigger1 = AnimElemtime(4) = 1 && time < 14
name = "Gou_Hadou1"
postype = P1
pos = ifelse(var(7) = 1,57, 70),-55
ownpal = 1
stateno = 1002
id = 1002 

[State 1000,2]
type = ChangeAnim
trigger1 = time = 50
value = 1001

[State 1000, 7]
type = ChangeState
trigger1 = time = 38 ;53
value = 0
ctrl = 1
;====================================================================
;Projectile
;====================================================================
[Statedef 1002]
type    = S
movetype= A
physics = N
velset = 3.8,0
anim = ifelse(parent,var(10)=0,ifelse(parent,var(7)=0,1004,1002),1165)
ctrl = 0
sprpriority = 4

[State 3016, HitVel]
type = velset
triggerall = numtarget
trigger1 = (movecontact || prevstateno) && p2dist x <= 5
X = 1

[State 1002, InPlay]
type = ParentVarSet
trigger1 = 1
v = 11
value = 1

[State 1002, Resistance-]
type = parentvaradd
trigger1 = time = 0
v = 4
value = -1

[State 1002, PushEnable]
type = playerpush
trigger1 = 1
value = 0

[State 1002, Depreciate]
type = ChangeState
trigger1 = moveguarded && parent,Var(10) = 1
value = 1002
ctrl = 0
ignorehitpause = 0

[State 1002, SlowMotion]
type = pause
trigger1 = movehit
time = 1
ignorehitpause = 1

[State 1002, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1002, HitOverride]
type = HitOverride
trigger1 = Time >= 0 && Parent,var(10) = 0
slot = 1
time = 1
stateno = 1003
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1002, HitOverride]
type = HitOverride
trigger1 = Time >= 0 && Parent,var(10) = 1
slot = 2
time = 1
stateno = 1002
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1002, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1002, HitDef]
type = HitDef
trigger1 = Time = 0 && Parent,Var(10) = 0
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
priority = 5,hit
damage = 40,20
sparkno = s7003
hitsound = s120,6
guardsound = s5,0
pausetime = 0,5;3,9
guard.pausetime = 0,14
ground.hittime = 18
air.hittime = 18
ground.velocity = ifelse((Parent,P2Dist X > 100 && Time <= 20),-7,-5),ifelse((Parent,P2Dist X > 100 && Time <= 20),0,-4.296875)
ground.type = High
air.velocity = ifelse((Parent,P2Dist X > 100 && Time <= 20),-4.5,-5),ifelse((Parent,P2Dist X > 100 && Time <= 20),-5,-4.296875)
ground.slidetime = 18
forcestand = 1
fall = ifelse((P2Dist Y < 0 || P2Statetype = A || Parent, P2Dist X <= 100),1,0)
fall.recover = 0
air.fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0


[State 1002, HitDefMetsu]
type = HitDef
trigger1 = Time >= 0 && Parent,Var(10) = 1 && uniqhitcount < Parent,Var(4)
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
priority = 5,hit
damage = 40,20
sparkno = s7003
hitsound = s120,10
guardsound = s5,0
pausetime = 3,ifelse(uniqhitcount =  Parent,Var(4),9,4)
guard.pausetime = 0,14
ground.hittime = 18
air.hittime = 18
ground.velocity=ifelse(uniqhitcount<Parent,Var(4),-2,-5.5),ifelse(uniqhitcount< Parent,Var(4),-5,-5.5)
ground.type = Low
air.velocity=ifelse(uniqhitcount<Parent,Var(4),-2,-5.5),ifelse(uniqhitcount<Parent,Var(4),-5,-5.5)
ground.slidetime = 18
palfx.time = 40 ;20
palfx.add = 217,61,0
palfx.sinadd = -255,-255,-255,80 ; 40
palfx.color = 20
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p1sprpriority = 5

[State 1003, Hit]
type = parentvarset
trigger1 = movehit
v = 18
value = 1
ignorehitpause = 1

[State 1002, Dissolve]
type = ChangeState
trigger1 = movecontact && parent,var(10) = 0
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
ignorehitpause = 1
value = 1003
ctrl = 0
;====================================================================
;Projectile Dissolve
;====================================================================
[Statedef 1003]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 1003
ctrl = 0
sprpriority = 4


[State 1003, Shaku_End_Anim_Set]
type = changeanim
triggerall = !time
trigger1 = prevstateno = 1171
trigger2 = prevstateno = 1166
trigger3 = prevstateno = 1161
value = 1166

[State 1003, Hit]
type = parentvarset
trigger1 = time = 0; && movehit
v = 18
value = 1
ignorehitpause = 1

[State 1003, Hit]
type = parentvarset
trigger1 = animtime = 0
v = 18
value = 0
ignorehitpause = 1

[State 1003, Hitsound]
type= playsnd
trigger1 = !var(30)&& (prevstateno = [1166,1172]) && !time
value = 120,6
channel = 6

[State 1003, Guardsound]
type= playsnd
trigger1 = var(30)&& (prevstateno = [1166,1172]) && !time
value = 5,0
channel = 6

[State 1003, InPlay]
type = ParentVarSet
trigger1 = time = 0
v = 11
value = 0

[State 1003, MGHInPlay]
type = parentvarset
trigger1 = time = 0
v = 16
value = 0

[State 1003]
type = Destroyself
trigger1 = animtime = 0

;--------------------------------------------------------------------
; Gou Hadou (Medium)
;--------------------------------------------------------------------
[Statedef 1015]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = ifelse(Var(7) = 0,1007,1010)
ctrl = 0
sprpriority = 2

[State 1015, Voice]
type = PlaySnd
trigger1 = AnimElem = 4 && time < 14
value = 50, 10
volumescale = 100
channel = 1

[State 1015, Effect]
type = PlaySnd
trigger1 = AnimElem = 4 && time < 14
value = 122,7
volumescale = 100

[State 1015, Hadouken]
type = Helper
trigger1 = AnimElemtime(4) = 1 && time < 14
name = "Gou_Hadou2"
postype = P1
pos = ifelse(var(7) = 1,57, 70),-55
ownpal = 1
stateno = 1016
id = 1016 

[State 1015,2]
type = ChangeAnim
trigger1 = time = 45
value = 1001

[State 1015, 7]
type = ChangeState
trigger1 = time = 48
value = 0
ctrl = 1
;====================================================================
;Hadouken
;====================================================================
[Statedef 1016]
type    = S
movetype= A
physics = N
velset = 5.5,0
anim = ifelse(parent,var(10)=0,ifelse(parent,var(7)=0,1004,1002),1165)
ctrl = 0
sprpriority = 4

[State 3016, HitVel]
type = velset
triggerall = numtarget
trigger1 = (movecontact || prevstateno) && p2dist x <= 5
X = 1

[State 1016, InPlay]
type = ParentVarSet
trigger1 = 1
v = 11
value = 2

[State 1016, PushEnable]
type = playerpush
trigger1 = 1
value = 0

[State 1016, Resistance-]
type = parentvaradd
trigger1 = time = 0
v = 4
value = -1

[State 1016, Depreciate]
type = ChangeState
trigger1 = moveguarded && parent,Var(10) = 1
value = 1016
ctrl = 0
ignorehitpause = 0

[State 1016, SlowMotion]
type = pause
trigger1 = movehit
time = 1
ignorehitpause = 1

[State 1016, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1016, HitOverride]
type = HitOverride
trigger1 = Time >= 0 && Parent,var(10) = 0
slot = 1
time = 1
stateno = 1003
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1016, HitOverride]
type = HitOverride
trigger1 = Time >= 0 && Parent,var(10) = 1
slot = 2
time = 1
stateno = 1016
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1016, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1016, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
priority = 5,hit
damage = 60,30
sparkno = s7003
;sparkno = 0
hitsound = s120,6
guardsound = s5,0
pausetime = 0,5
guard.pausetime = 0,14
ground.hittime = 18
air.hittime = 18
ground.velocity = ifelse((Parent,P2Dist X > 100 && Time <= 20),-7,-5),ifelse((Parent,P2Dist X > 100 && Time <= 20),0,-4.296875)
ground.type = High
air.velocity = ifelse((Parent,P2Dist X > 100 && Time <= 20),-6,-5),ifelse((Parent,P2Dist X > 100 && Time <= 20),-5,-4.296875)
ground.slidetime = 18
forcestand = 1
fall = ifelse((P2Dist Y < 0 || P2Statetype = A || Parent, P2Dist X <= 100),1,0)
fall.recover = 0
air.fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0


[State 1016, HitDefMetsu]
type = HitDef
trigger1 = Time >= 0 && Parent,Var(10) = 1 && uniqhitcount < Parent,Var(4)
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
priority = 5,hit
damage = 40,20
sparkno = s7003
hitsound = s120,10
guardsound = s5,0
pausetime = 3,ifelse(uniqhitcount = Parent,Var(4),9,4)
guard.pausetime = 0,14
ground.hittime = 18
air.hittime = 18
ground.velocity=ifelse(uniqhitcount<Parent,Var(4),-4,-5.5),ifelse(uniqhitcount<Parent,Var(4),-5,-5.5)
ground.type = Low
air.velocity=ifelse(uniqhitcount<Parent,Var(4),-4,-5.5),ifelse(uniqhitcount<Parent,Var(4),-5,-5.5)
ground.slidetime = 18
palfx.time = 40 ;20
palfx.add = 217,61,0
palfx.sinadd = -255,-255,-255,80 ; 40
palfx.color = 20
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p1sprpriority = 5

[State 1003, Hit]
type = parentvarset
trigger1 = movehit
v = 18
value = 1
ignorehitpause = 1

[State 1016, Dissolve]
type = ChangeState
trigger1 = movecontact && parent,var(10) = 0
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
ignorehitpause = 1
value = 1003
ctrl = 0
;--------------------------------------------------------------------
; Gou Hadou (Strong)
;--------------------------------------------------------------------
[Statedef 1020]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = ifelse(Var(7) = 0,1008,1010)
ctrl = 0
sprpriority = 2

[State 1020, Voice]
type = PlaySnd
trigger1 = AnimElem = 4 && time < 14
value = 50, 10
volumescale = 100
channel = 1

[State 1020, Effect]
type = PlaySnd
trigger1 = AnimElem = 4 && time < 14
value = 122,7
volumescale = 100

[State 1020, Hadouken]
type = Helper
trigger1 = AnimElemtime(4) = 1 && time < 14
name = "Gou_Hadou3"
postype = P1
pos = ifelse(var(7) = 1,57, 70),-55
ownpal = 1
stateno = 1021
id = 1021 

[State 1020,2]
type = ChangeAnim
trigger1 = time = 45
value = 1001

[State 1020, 7]
type = ChangeState
trigger1 = time = 48
value = 0
ctrl = 1

;======================================================================
;Hadouken
;======================================================================
[Statedef 1021]
type    = S
movetype= A
physics = N
velset = 6.2,0
anim = ifelse(parent,var(10)=0,ifelse(parent,var(7)=0,1004,1002),1165)
ctrl = 0
sprpriority = 4

[State 1021, InPlay]
type = ParentVarSet
trigger1 = 1
v = 11
value = 3

[State 1021, Depreciate]
type = ChangeState
trigger1 = moveguarded && parent,Var(10) = 1
value = 1021
ctrl = 0
ignorehitpause = 0

[State 1021, HitOverride]
type = HitOverride
trigger1 = Time >= 0 && Parent,var(10) = 0
slot = 1
time = 1
stateno = 1003
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1021, HitOverride]
type = HitOverride
trigger1 = Time >= 0 && Parent,var(10) = 1
slot = 2
time = 1
stateno = 1021
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1021, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1021, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1021, HitDef_Close]
type = HitDef
trigger1 = Time <= 5 && uniqhitcount = 0
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
priority = 5,hit
damage = 70,30
sparkno = s7003
hitsound = s120,6
guardsound = s5,0
pausetime = 0,5   ;0,3
ground.hittime = 22
air.hittime = 18
ground.velocity = -5.3,-6.396875
ground.type = low
air.velocity = -6,-6.396875
ground.slidetime = 18
forcestand = 1
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = 0.6
p1sprpriority = 5

[State 1021, HitDef]
type = HitDef
trigger1 = Time > 5 && uniqhitcount = 0
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
priority = 5,hit
damage = 70,30
sparkno = s7003
hitsound = s120,6
guardsound = s5,0
pausetime = 0,5   ;0,3
guard.pausetime = 0,14
ground.hittime = 22
air.hittime = 18
ground.velocity = -7
ground.type = high
air.velocity = -5,-4.396875
ground.slidetime = 18
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = 0.428125
p1sprpriority = 5

[State 1021, Hit]
type = parentvarset
trigger1 = movehit
v = 18
value = 1
ignorehitpause = 1

[State 1021, Dissolve]
type = ChangeState
trigger1 = movecontact
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70
ignorehitpause = 1
value = 1003
ctrl = 0

;--------------------------------------------------------------------
; Gou Shoryu (Weak)
;--------------------------------------------------------------------
[Statedef 1030]
type    = S
movetype= A
physics = S
juggle  = 15
poweradd= 110
velset = 0,0
anim = 1030
ctrl = 0
sprpriority = 2

[State 1030, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 2
persistent = 0
ignorehitpause = 1

[State 1030, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 1030, NoHit]
type = nothitby
trigger1 = time = 0
value = SCA
time = ifelse(var(7),10,6)

[State 1030, Velset1]
type = velset
trigger1 = time = 1
x = 2

[State 1030, Voice]
type = playsnd
trigger1 = time = 2
value = 50,17
volumescale = 100
channel = 1

[State 1030, 4]
type = HitDef
trigger1 = AnimElemtime(1) = 1
attr = A, SA
animtype  = Hard
fall.animtype = hard
damage    = ifelse(Var(0)<5,20,10), 4
priority  = 5
guardflag = M
pausetime = 12,12
sparkno = s7003
sparkxy = 1,-48
hitsound   = s120,6
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 2,-7
guard.velocity = -7
air.velocity = 2,-1
fall = 1


[State 1030, 4]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
animtype  = Hard
fall.animtype = hard
damage    = ifelse(Var(0)<5,20,10), 4
priority  = 5
guardflag = M
pausetime = 12,12
sparkno = s7003
sparkxy = -10,-65
hitsound   = s120,6
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 2,-7
guard.velocity = -7
air.velocity = 0,-7
fall = 1
yaccel = 0.45


[State 1030, GoingUp]
type = ChangeState
trigger1 = AnimTime = 0
value = 1031
;====================================================================
[Statedef 1031]
type    = A
movetype= A
physics = N
velset = 2,-6
anim = 1031

[State 1031, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 1041, Juggle set]
type = varset
trigger1 = movehit
v = 17
value = 15

[State 1041, Corner_Push]
type = posadd
triggerall = numtarget
triggerall = target, statetype != l
trigger1 = target, backedgedist = 0 && p2dist x < 75
trigger1 = movecontact
x = -2.2+(time/100)

[State 1031, 4]
type = HitDef
trigger1 = Time = 1
attr = A, SA
animtype  = Medium
fall.animtype = up
damage    = ifelse(Var(0)<5,40,20), 4
priority  = 5
guardflag = M
pausetime = 12,11
sparkno = s7003
sparkxy = -10,-90
hitsound   = s120,6
guardsound = s5,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2,-9
guard.velocity = -7
air.velocity = -1.6,-10.5
fall = 1
fall.recover = 0
yaccel = 0.50

[State 1031, UpWard]
type = velset
trigger1 = time = 0
y = -6
x = 4

[State 1031, 2]
type = VelMul
trigger1 = Time >= 0 
x = .88

[State 1031, 3]
type = VelAdd
trigger1 = Time >= 0
y = .40

;[State 1031, gravity]
;type = gravity
;trigger1 = 1

[State 1031, Decend anim]
type = ChangeAnim
trigger1 = anim = 1031 && Vel Y > 0 && anim != 1032
value = 1032

[State 1031, DecendVelX]
type = Velset
trigger1 = anim = 1032
X = 0

[State 1031, Land]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 1031, Land2]
type = velset
trigger1 = Pos Y = 0 && Vel Y > 0
y = 0

[State 1031, Land3]
type = ChangeState
trigger1 = anim = 1032 && Pos Y >= 0
value = 1033
;====================================================================
[Statedef 1033]
type    = S
movetype= I
physics = S
anim = 1033
sprpriority = 3
velset = 0,0

[State 1033, AfterImageCancel]
type = AfterImageTime
trigger1 = time = 0
time = 2

[State 1033, LandSND]
type = playsnd
trigger1 = time = 0
value = 40,0
volumescale = 100

[State 1033, Land]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 1033, Land2]
type = velset
trigger1 = Pos Y = 0 && Vel Y > 0
y = 0

[State 1033, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Gou Shoryu (Medium)
;----------------------------------------------------------------------
[Statedef 1035]
type    = S
movetype= A
physics = S
juggle  = Var(17)
poweradd= 110
velset = 0,0
anim = 1030
ctrl = 0
sprpriority = 2

[State 1035, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 2
persistent = 0
ignorehitpause = 1

[State 1035, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 1035, NoHit]
type = nothitby
trigger1 = time = 0
value = SCA
time = ifelse(var(7),10,6)

[State 1035, Velset1]
type = velset
trigger1 = time = 1
x = 2

[State 1035, Voice]
type = playsnd
trigger1 = time = 0
value = 50,17
volumescale = 100
channel = 1

[State 1035, 4]
type = HitDef
trigger1 = AnimElemtime(1) = 1
attr = A, SA
animtype  = hard
fall.animtype = hard
damage    = ifelse(Var(0)<5,20,10), 6
priority  = 5
guardflag = M
pausetime = 12,12
sparkno = s7003
sparkxy = 1,-48
hitsound   = s120,6
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2.3,-7
guard.velocity = -7
air.velocity = -3.5,-1
fall = 1

[State 1035, 4]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
animtype  = hard
fall.animtype = hard
damage    = ifelse(Var(0)<5,20,10), 6
priority  = 5
guardflag = M
pausetime = 12,12
sparkno = s7003
sparkxy = -10,-65
hitsound   = s120,6
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2,-7.3
guard.velocity = -7
air.velocity = 0,-7.3
fall = 1

[State 1035, GoingUp]
type = ChangeState
trigger1 = AnimTime = 0
value = 1036
;====================================================================
[Statedef 1036]
type    = A
movetype= A
physics = N
velset = 2,-6
anim = 1031

[State 1036, Juggle set]
type = varset
trigger1 = movehit
v = 17
value = 15

[State 1036, Corner_Push]
type = posadd
triggerall = numtarget
triggerall = target, statetype != l
trigger1 = target, backedgedist = 0 && p2dist x < 90
trigger1 = movecontact
x = -2.5+(time/100)

[State 1036, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 1036, 4]
type = HitDef
trigger1 = Time = 1
attr = A, SA
animtype  = hard
fall.animtype = up
damage    = ifelse(Var(0)<5,40,20), 4
priority  = 5
guardflag = M
pausetime = 12,11
sparkno = s7003
sparkxy = -10,-90
hitsound   = s120,6
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2,-12
guard.velocity = -7
air.velocity = -2,-11
fall = 1
fall.recover = 0
yaccel = 0.50


[State 1036, UpWard]
type = velset
trigger1 = time = 0
y = -8.5
x = 8 ;13

[State 1036, 2]
type = VelMul
trigger1 = Time >= 0 
x = .85

[State 1036, 3]
type = VelAdd
trigger1 = Time >= 0
y = .44

[State 1036, Decend anim]
type = ChangeAnim
trigger1 = anim = 1031 && Vel Y > 0 && anim != 1032
value = 1032

[State 1036, NoVelX]
type = velset
trigger1 = anim = 1032
x = 0

[State 1036, Land]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 1036, Land2]
type = velset
trigger1 = Pos Y = 0 && Vel Y > 0
y = 0

[State 1036, Land3]
type = ChangeState
trigger1 = anim = 1032 && Pos Y >= 0
value = 1033

;--------------------------------------------------------------------
; Gou Shoryu (Strong)
;--------------------------------------------------------------------
[Statedef 1040]
type    = S
movetype= A
physics = S
juggle  = Var(17)
poweradd= 110
velset = 0,0
anim = 1030
ctrl = 0
sprpriority = 2

[State 1040, VarAdd]
type = VarAdd
triggerall = (NumTarget > 0) && (MoveHit)
trigger1 = animelem = 1
trigger2 = animelem = 2
var(0) = 2
persistent = 0
ignorehitpause = 1

[State 1040, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 1040, NoHit]
type = nothitby
trigger1 = time = 0
value = SCA
time = ifelse(var(7),10,6)

[State 1040, Velset1]
type = velset
trigger1 = time = 1
x = 2

[State 1040, Voice]
type = playsnd
trigger1 = time = 0
value = 50,17
volumescale = 100
channel = 1

[State 1040, 4]
type = HitDef
trigger1 = AnimElemtime(1) = 1
attr = A, SA
animtype  = hard
fall.animtype = hard
damage    = ifelse(Var(0)<5,20,10), 8
priority  = 5
guardflag = M
pausetime = 12,12
sparkno = s7003
sparkxy = 1,-48
hitsound   = s120,6
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2,-7
guard.velocity = -7
air.velocity = -3.5,-2
fall = 1

[State 1040, 4]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
animtype  = hard
fall.animtype = hard
damage    = ifelse(Var(0)<5,20,10), 8
priority  = 5
guardflag = M
pausetime = 12,11
sparkno = s7003
sparkxy = -10,-65
hitsound   = s120,6
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2,-7.3
guard.velocity = -7
air.velocity = 0,-7.3
fall = 1

[State 1040, GoingUp]
type = ChangeState
trigger1 = AnimTime = 0
value = 1041
;====================================================================
[Statedef 1041]
type    = A
movetype= A
physics = N
velset = 2,-6
anim = 1031

[State 1041, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 1041, Juggle set]
type = varset
trigger1 = movehit
v = 17
value = 15

[State 1041, Corner_Push]
type = posadd
triggerall = numtarget
triggerall = target, statetype != l
trigger1 = target, backedgedist = 0 && p2dist x < 90
trigger1 = movecontact
x = -2.5+(time/100)

[State 1041, 4]
type = HitDef
trigger1 = Time = 1
attr = A, SA
animtype  = hard
fall.animtype = up
damage    = ifelse(Var(0)<5,40,20), 4
priority  = 5
guardflag = M
pausetime = 17,16
sparkno = s7003
sparkxy = -10,-90
hitsound   = s120,6
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2.3,-11
guard.velocity = -7
air.velocity = -2.3,-12.5
fall = 1
fall.recover = 0
yaccel = 0.50


[State 1041, UpWard]
type = velset
trigger1 = time = 0
y = -11
x = 10 ;14

[State 1041, 2]
type = VelMul
trigger1 = Time >= 0 
x = .90

[State 1041, 3]
type = VelAdd
trigger1 = Time >= 0
y = .46

[State 1041, Decendanim]
type = ChangeAnim
trigger1 = anim = 1031 && Vel Y > 0 && anim != 1032
value = 1032

[State 1041, NoVelX]
type = velset
trigger1 = anim = 1032
x = 0

[State 1041, Land]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 1041, Land2]
type = velset
trigger1 = Pos Y = 0 && Vel Y > 0
y = 0

[State 1041, Land3]
type = ChangeState
trigger1 = anim = 1032 && Pos Y >= 0
value = 1033

;--------------------------------------------------------------------
; Asura Senku (Long-Forward)
;--------------------------------------------------------------------
[Statedef 1050]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1050
ctrl = 0
sprpriority = 2

[State 1050, Voice]
type = Playsnd
trigger1 = Time = 0
value = 50,17
volumescale = 100

[State 1050, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 1050, Shadows]
type = Afterimage
trigger1 = Time = 0
time = 300
length = 10
PalBright   =   0,  0,  0
PalContrast = 128,128,128
PalAdd      =   0,  0,  0
PalMul      =  0.9,0.9,0.9
FrameGap = 3
;Trans = add1

[State 1050, 3]
type = Velset
trigger1 = time = 0
x = 3

[State 1050, 4]
type = Velset
trigger1 = AnimElem = 5
x = -3

[State 1050, Forward]
type = ChangeState
trigger1 = AnimTime = 0
value = 1051
;====================================================================
[Statedef 1051]
type    = S
movetype= I
physics = N
juggle  = 0
ctrl = 0
anim = 1051
velset = 9,0

[State 1051, 2]
type = Width
trigger1 = Time >= 0
value = 10,0

[State 1051, 5]
type = PlaySnd
trigger1 = time = 0
value = 130,0
volumescale = 100

[State 1051, 2]
type = Changeanim
trigger1 = p2bodydist x < -30
trigger1 = anim != 1052
value = 1052

[State 1051, 6]
type = Sprpriority
trigger1 = time >= 0
value = 1

[State 1051, 2]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 1051, 2]
type = Velmul
trigger1 = Time >= 25
trigger1 = Vel X > 0
x = .92

[State 1051, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 1051, 3]
type = Velset
trigger1 = Time = 45
trigger2 = frontedgedist = 10
x = 0

[State 1051, 3]
type = Turn
trigger1 = Time = 45
trigger1 = anim = 3962

[State 1051, 1]
type = AfterImageTime
trigger1 = time = 38
trigger2 = frontedgedist = 10
trigger3 = backedgedist = 0
trigger3 = time > 4
Time = 0

[State 1051, 6]
type = Sprpriority
trigger1 = time = 13
trigger2 = frontedgedist = 10
trigger3 = backedgedist = 0
trigger3 = time > 4
value = 0

[State 1051, 3]
type = ChangeState
trigger1 = Time = 45
trigger2 = frontedgedist = 10
value = 1053
ctrl = 0

[State 1051, 3]
type = Turn
trigger1 = frontedgedist = 10
trigger1 = anim = 1052

[State 1051, 3]
type = ChangeState
trigger1 = backedgedist = 0
trigger1 = time > 4
value = 1053
ctrl = 0
;====================================================================
[Statedef 1053]
type    = S
physics = S
movetype = A
ctrl = 0
anim = 47

[State 1053, Turn]
type = turn
trigger1 = !time && p2dist x < 0

[State 1053, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1053, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1053, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 1053, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------
;Asura Senkuu (Long Back)
;--------------------------------------------------------------------
[Statedef 1054]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 1050
velset = 0,0

[State 1054, Voice]
type = Playsnd
trigger1 = Time = 0
value = 50,17
volumescale = 100

[State 1054, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 1054, Shadows]
type = Afterimage
trigger1 = Time = 0
time = 999
length = 10
PalBright   =   0,  0,  0
PalContrast = 128,128,128
PalAdd      =   0,  0,  0
PalMul      =  0.9,0.9,0.9
FrameGap = 3
;Trans = Add1

[State 1054, 6]
type = Velset
trigger1 = time = 0
x = -3

[State 1054, 6]
type = Velset
trigger1 = AnimElem = 5
x = 3

[State 1054, Back]
type = ChangeState
trigger1 = AnimTime = 0
value = 1055
;====================================================================
[Statedef 1055]
type    = S
movetype= I
physics = N
juggle  = 0
ctrl = 0
anim = 1051
velset = -9,0

[State 1055, 2]
type = Width
trigger1 = Time >= 0
value = 10,0

[State 1055, 5]
type = PlaySnd
trigger1 = time = 0
value = 130,0
volumescale = 100

[State 1055, 2]
type = Changeanim
trigger1 = p2bodydist x < -30
trigger1 = anim != 1052
value = 1052

[State 1055, 6]
type = Sprpriority
trigger1 = time >= 0
value = 1

[State 1055, 2]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 1055, 2]
type = Velmul
trigger1 = Time >= 25
trigger1 = Vel X < 0
x = .92

[State 1055, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 1055, 3]
type = Velset
trigger1 = Time = 45
trigger2 = frontedgedist = 10
x = 0

[State 1055, 3]
type = Turn
trigger1 = Time = 45
trigger1 = anim = 3962

[State 1055, 1]
type = AfterImageTime
trigger1 = time = 38
trigger2 = frontedgedist = 10
trigger3 = backedgedist = 0
Time = 0

[State 1055, 6]
type = Sprpriority
trigger1 = time = 33
trigger2 = frontedgedist = 10
trigger3 = backedgedist = 0
trigger3 = time > 4
value = 0

[State 1055, 3]
type = ChangeState
trigger1 = Time = 45
trigger2 = frontedgedist = 10
value = 1053
ctrl = 0

[State 1055, 3]
type = Turn
trigger1 = frontedgedist = 10
trigger1 = anim = 1052

[State 1055, 3]
type = ChangeState
trigger1 = backedgedist = 0
trigger1 = time > 4
value = 1053
ctrl = 0

;--------------------------------------------------------------------
;Asura Senkuu (Short Forward)
;--------------------------------------------------------------------
[Statedef 1056]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 1050
velset = 0,0

[State 1056, Voice]
type = Playsnd
trigger1 = Time = 0
value = 50,17
volumescale = 100

[State 1056, 2]
type = Playsnd
trigger1 = Time = 0
value = 4,5

[State 1056, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 1056, Shadows]
type = Afterimage
trigger1 = Time = 0
time = 999
length = 10;21
PalBright   =   0,  0,  0
PalContrast = 128,128,128
PalAdd      =   0,  0,  0
PalMul      =  0.9,0.9,0.9
FrameGap = 3;10
;Trans = Add1

[State 1056, 6]
type = Velset
trigger1 = time = 0
x = 3

[State 1056, 6]
type = Velset
trigger1 = AnimElem = 5
x = -3

[State 1056, Forward]
type = ChangeState
trigger1 = AnimTime = 0
value = 1057
;====================================================================
[Statedef 1057]
type    = S
movetype= I
physics = N
juggle  = 0
ctrl = 0
anim = 1051
velset = 6.5,0

[State 1057, 2]
type = Width
trigger1 = Time >= 0
value = 10,0

[State 1057, 5]
type = PlaySnd
trigger1 = time = 0
value = 130,0
volumescale = 100

[State 1057, 2]
type = Changeanim
trigger1 = p2bodydist x < -30
trigger1 = anim != 1052
value = 1052

[State 1057, 6]
type = Sprpriority
trigger1 = time >= 0
value = 1

[State 1057, 2]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 1057, 2]
type = Velmul
trigger1 = Time >= 15
trigger1 = Vel X > 0
x = .92

[State 1057, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 1057, 3]
type = Velset
trigger1 = Time = 25
trigger2 = frontedgedist = 10
x = 0

[State 1057, 3]
type = Turn
trigger1 = Time = 25
trigger1 = anim = 3962

[State 1057, 1]
type = AfterImageTime
trigger1 = time = 22 ;13
trigger2 = frontedgedist = 10
trigger3 = backedgedist = 0
trigger3 = time > 4
Time = 0

[State 1057, 6]
type = Sprpriority
trigger1 = time = 13
trigger2 = frontedgedist = 10
trigger3 = backedgedist = 0
trigger3 = time > 4
value = 0

[State 1057, 3]
type = ChangeState
trigger1 = Time = 25
trigger2 = frontedgedist = 10
value = 1053
ctrl = 0

[State 1057, 3]
type = Turn
trigger1 = frontedgedist = 10
trigger1 = anim = 1052

[State 1057, 3]
type = ChangeState
trigger1 = backedgedist = 0
trigger1 = time > 4
value = 1053
ctrl = 0
;--------------------------------------------------------------------
;Asura Senkuu (Short Back)
;--------------------------------------------------------------------
[Statedef 1058]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 1050
velset = 0,0

[State 1058, Voice]
type = Playsnd
trigger1 = Time = 0
value = 50,17
volumescale = 100

[State 1058, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 1058, Shadows]
type = Afterimage
trigger1 = Time = 0
time = 999
length = 10
PalBright   =   0,  0,  0
PalContrast = 128,128,128
PalAdd      =   0,  0,  0
PalMul      =  0.9,0.9,0.9
FrameGap = 3
;Trans = Add1

[State 1058, 6]
type = Velset
trigger1 = time = 0
x = -3

[State 1058, 6]
type = Velset
trigger1 = AnimElem = 5
x = 3

[State 1058, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 1059
;====================================================================
[Statedef 1059]
type    = S
movetype= I
physics = N
juggle  = 0
ctrl = 0
anim = 1051
velset = -6.5,0

[State 1059, 5]
type = PlaySnd
trigger1 = time = 0
value = 130,0
volumescale = 100

[State 1059, 2]
type = Changeanim
trigger1 = p2bodydist x < -30
trigger1 = anim != 1052
value = 1052

[State 1059, 6]
type = Sprpriority
trigger1 = time >= 0
value = 1

[State 1059, 2]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 1059, 2]
type = Velmul
trigger1 = Time >= 15
trigger1 = Vel X < 0
x = .92

[State 1059, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 1059, 3]
type = Velset
trigger1 = Time = 25
trigger2 = frontedgedist = 10
x = 0

[State 1059, 3]
type = Turn
trigger1 = Time = 25
trigger1 = anim = 3962

[State 1059, 1]
type = AfterImageTime
trigger1 = time = 22
trigger2 = frontedgedist = 10
trigger3 = backedgedist = 0
Time = 0

[State 1059, 6]
type = Sprpriority
trigger1 = time = 13
trigger2 = frontedgedist = 10
trigger3 = backedgedist = 0
trigger3 = time > 4
value = 0

[State 1059, 3]
type = ChangeState
trigger1 = Time = 25
trigger2 = frontedgedist = 10
value = 1053
ctrl = 0

[State 1059, 3]
type = Turn
trigger1 = frontedgedist = 10
trigger1 = anim = 3962

[State 1059, 3]
type = ChangeState
trigger1 = backedgedist = 0
trigger1 = time > 4
value = 1053
ctrl = 0

;--------------------------------------------------------------------
;Tatsumaki Zankuu Kyaku (Weak)
;--------------------------------------------------------------------
[Statedef 1060]
type    = A
movetype= A
physics = N
juggle  = 7
poweradd= 110
velset = 3.5,-2
anim = 1060
ctrl = 0
sprpriority = 3

[State 1060, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
trigger2 = (animelem = 4 || animelem = 6) && movehit
var(0) = 2
persistent = 0
ignorehitpause = 1

[State 1060, NoProjHit]
type = NotHitBy
trigger1 = time = 0
value = SCA,SP,HP,NP
time = 6

[State 1060, Voice]
type = PlaySnd
trigger1 = Time = 0
value = 50, 0
volumescale = 100
channel = 1
ignorehitpause = 1

[State 1060, 1]
type = PlaySnd
trigger1 = animelem = 4 || animelem = 6
value = 0, 4
channel = 3

[State 1060, 1]
type = PlaySnd
trigger1 = Time >= 13 && timemod = 20,4
value = 0, 4
channel = 3

[State 1060, 2]
type = Posadd
trigger1 = animelem = 3
Y = -13

[State 1060, No Physics]
type = statetypeset
trigger1 = time > 8
physics = N

[State 1060, 3]
type = Velset
trigger1 = time > 8
X = 3.2
Y = 0

[State 1060, Knee]
type = HitDef
trigger1 = Time = 1
attr = A, SA
animtype  = hard
fall.animtype = hard
damage    = ifelse(Var(0)<5,20,10), 4
priority  = 5
guardflag = MA
pausetime = 14,13
sparkno = s7003
sparkxy = 0,-65
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.9,-4.6
guard.velocity = -5
air.velocity = -0.9,-3.6
fall = 1


[State 1060, 4]
type = HitDef
trigger1 = animelem = 4 || animelem = 6
attr = A, SA
animtype  = hard
damage    = ifelse(Var(0)<5,35,15), 4
priority  = 5
guardflag = MA
pausetime = 12,11
sparkno = s7003
sparkxy = -16,-65
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = ifelse(p2dist x > 0,-2.1,2.7),-9
guard.velocity = -7
air.velocity = ifelse(p2dist x > 0,-1.9, 1.9),-9
fall = 1
yaccel = 0.45

[State 1060, 5]
type = ChangeState
trigger1 = AnimTime = 0 && time > 10
value = 1061
;====================================================================
; Tatsu - Decend
;--------------------------------------------------------------------
[Statedef 1061]
type    = A
movetype= A
physics = N
anim = 1061

[State 1061, 1] ;Gravity
type = VelAdd
trigger1 = 1
y = .45

[State 1061, Set]
type = posset
trigger1 = pos Y >= 0
y = 0

[State 1061, Set]
type = velset
trigger1 = pos Y >= 0 && vel Y >= 0
y = 0

[State 1061, 5]
type = ChangeState
trigger1 = pos y >= 0
value = 1062
ctrl = 0
;====================================================================
[Statedef 1062]
type    = A
movetype= A
physics = N
anim = 1062
ctrl = 0

[State 1062, Turn]
type = turn
trigger1 = p2dist x < 0

[State 1062, 1]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0
volumescale = 100

[State 1062, Set]
type = posset
trigger1 = pos Y >= 0
y = 0

[State 1062, Set]
type = velset
trigger1 = pos Y >= 0 && vel Y >= 0
y = 0
x = 0

[State 1062, 5]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------
;Tatsumaki Zankuu Kyaku (Medium)
;--------------------------------------------------------------------
[Statedef 1065]
type    = A
movetype= A
physics = N
juggle  = 7
poweradd= 110
velset = 3.9,-2
anim = 1060
ctrl = 0
sprpriority = 3

[State 1065, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
trigger2 = (animelem = 4 || animelem = 6) && movehit
var(0) = 3
persistent = 0
ignorehitpause = 1

[State 1065, NoProjHit]
type = NotHitBy
trigger1 = time = 0
value = SCA,SP,HP,NP
time = 6

[State 1065, Voice]
type = PlaySnd
trigger1 = Time = 0
value = 50, 0
volumescale = 100
channel = 1
ignorehitpause = 1

[State 1065, 1]
type = PlaySnd
trigger1 = animelem = 4 || animelem = 6
value = 0, 4
channel = 3

[State 1065, 1]
type = PlaySnd
trigger1 = Time >= 13 && timemod = 20,4
value = 0, 4
channel = 3

[State 1065, 2]
type = Posadd
trigger1 = animelem = 3
Y = -13

[State 1065, No Physics]
type = statetypeset
trigger1 = time > 8
physics = N

[State 1065, 3]
type = Velset
trigger1 = time > 8
X = 3.8
Y = 0

[State 1065, Knee]
type = HitDef
trigger1 = Time = 1
attr = A, SA
animtype  = hard
fall.animtype = hard
damage    = 20, 4
priority  = 5
guardflag = MA
pausetime = 14,13
sparkno = s7003
sparkxy = 0,-65
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.9,-4.6
guard.velocity = -7
air.velocity = -0.9,-3.6
fall = 1


[State 1065, 4]
type = HitDef
trigger1 = animelem = 4 || animelem = 6
attr = A, SA
animtype  = hard
damage    = 23, 4
priority  = 5
guardflag = MA
pausetime = 12,11
sparkno = s7003
sparkxy = -16,-65
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = ifelse(p2dist x > 0,-4.7,4.7),-4.5
guard.velocity = -4
air.velocity = ifelse(p2dist x > 0,-4.9,4.9),-4
fall = 1
yaccel = 0.45

[State 1065, 5]
type = ChangeState
trigger1 = AnimTime = 0 && time > 20
value = 1061

;--------------------------------------------------------------------
;Tatsumaki Zankuu Kyaku (Hard)
;--------------------------------------------------------------------
[Statedef 1070]
type    = A
movetype= A
physics = N
juggle  = 7
poweradd= 110
velset = 4.8,-2
anim = 1060
ctrl = 0
sprpriority = 3

[State 1070, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 4
persistent = 0
ignorehitpause = 1

[State 1070, NoProjHit]
type = NotHitBy
trigger1 = time = 0
value = SCA,SP,HP,NP
time = 6

[State 1070, Voice]
type = PlaySnd
trigger1 = Time = 0
value = 50, 0
volumescale = 100
channel = 1
ignorehitpause = 1

[State 1070, 1]
type = PlaySnd
trigger1 = animelem = 4 || animelem = 6
value = 0, 4
channel = 3


[State 1070, 2]
type = Posadd
trigger1 = animelem = 3
Y = -13

[State 1070, 3]
type = Velset
trigger1 = time > 8
X = 4.8 ;3.6
Y = 0

[State 1070, Knee]
type = HitDef
trigger1 = Time = 1
attr = A, SA
animtype  = Medium
fall.animtype = hard
damage    = ifelse(Var(0)<5,20,10), 4
priority  = 5
guardflag = MA
pausetime = 14,13
sparkno = s7003
sparkxy = 0,-65
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.9,-4.6
guard.velocity = -4
air.velocity = -0.9,-3.6
fall = 1

[State 1070, 4]
type = HitDef
trigger1 = animelem = 4 || animelem = 6
attr = A, SA
animtype  = Hard
damage    = ifelse(Var(0)<5,22,12), 4
priority  = 5
guardflag = MA
pausetime = 12,11
sparkno = s7003
sparkxy = -16,-65
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -3,-5.5
guard.velocity = -6
air.velocity = -5.9,-4.3
fall = 1
yaccel = 0.6

[State 1070, 5]
type = ChangeState
trigger1 = AnimTime = 0 && time > 24
value = 1061
;--------------------------------------------------------------------
;Air Tatsumaki Zankuu Kyaku (Weak)
;--------------------------------------------------------------------
[Statedef 1080]
type    = A
movetype= A
physics = N
juggle  = 6
poweradd= 110
anim = 1080
ctrl = 0
sprpriority = 2

[State 1080, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 1080, NoProjHit]
type = NotHitBy
trigger1 = time = 0
value = SCA,SP,HP,NP
time = 4

[State 1080, Voice]
type = playsnd
trigger1 = time = 0 
value = 50,5
volumescale = 100
channel = 1

[State 1080, 1]
type = PlaySnd
trigger1 = animelem = 4 || animelem = 6
value = 0, 4
channel = 3

[State 1080, Move FWD]
type = veladd
trigger1 = 1
X = ifelse(vel X < 0,-0.1,0.1)

[State 1080, 2]
type = veladd
trigger1 = time < 20
y = -0.5

[State 1080, 1] ;Gravity
type = VelAdd
trigger1 = 1
y = .99

[State 1080, 4]
type = HitDef
trigger1 = animelem = 4 || animelem = 6
attr = A, SA
animtype  = Medium
damage    = 35, 4
priority  = 6,HIt
guardflag = MA
pausetime = 14,13
sparkxy = -10,-70
sparkno = s7003
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = ifelse(p2dist x > 0,-1,1),-11.3
guard.velocity = -7
air.velocity = ifelse(p2dist x > 0,-1.5,1.5), -9
forcestand = 1
fall = 1
yaccel = 0.5

[State 1080, set]
type = posset
trigger1 = pos y > 0
y = 0

[State 1080, 5]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y = 0
value = 1090

;--------------------------------------------------------------------
;Air Tatsumaki Zankuu Kyaku (Medium)
;--------------------------------------------------------------------
[Statedef 1081]
type    = A
movetype= A
physics = N
juggle  = 6
poweradd= 110
anim = 1080
ctrl = 0
sprpriority = 2

[State 1081, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 1081, NoProjHit]
type = NotHitBy
trigger1 = time = 0
value = SCA,SP,HP,NP
time = 4

[State 1081, Voice]
type = playsnd
trigger1 = time = 0 
value = 50,5
volumescale = 100
channel = 1

[State 1081, 1]
type = PlaySnd
trigger1 = animelem = 4 || animelem = 6
value = 0, 4
channel = 3

[State 1081, Move FWD]
type = veladd
trigger1 = 1
X = ifelse(vel X < 0,-0.1,0.1)

[State 1081, 2]
type = veladd
trigger1 = time < 20
y = -0.5

[State 1081, 1] ;Gravity
type = VelAdd
trigger1 = time >= 1
y = .99

[State 1081, 4]
type = HitDef
trigger1 = animelem = 4 || animelem = 6
attr = A, SA
animtype  = Medium
damage    = 35, 4
priority  = 6,HIt
guardflag = MA
pausetime = 14,13
sparkno = s7003
sparkxy = -10,-70
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = ifelse(p2dist x > 0,-3,3) ,-5
guard.velocity = -7
air.velocity = ifelse(p2dist x > 0,-3,3), -5
forcestand = 1
fall = 1
yaccel = 0.45

[State 1081, set]
type = posset
trigger1 = pos y > 0
y = 0

[State 1081, 5]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y = 0
value = 1090

;--------------------------------------------------------------------
;Air Tatsumaki Zankuu Kyaku (Strong)
;--------------------------------------------------------------------
[Statedef 1082]
type    = A
movetype= A
physics = N
juggle  = 7
poweradd= 110
anim = 1080
ctrl = 0
sprpriority = 2

[State 1085, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 1082, NoProjHit]
type = NotHitBy
trigger1 = time = 0
value = SCA,SP,HP,NP
time = 4

[State 1082, Voice]
type = playsnd
trigger1 = time = 0 
value = 50,5
volumescale = 100
channel = 1

[State 1082, 1]
type = PlaySnd
trigger1 = animelem = 4 || animelem = 6
value = 0, 4
channel = 3

[State 1082, Move FWD]
type = veladd
trigger1 = 1
X = ifelse(vel X < 0,-0.1,0.1)

[State 1082, 2]
type = veladd
trigger1 = time < 20
y = -0.5

[State 1082, 1] ;Gravity
type = VelAdd
trigger1 = time >= 5
y = .99

[State 1082, 4]
type = HitDef
trigger1 = animelem = 4 || animelem = 6
attr = A, SA
animtype  = Medium
damage    = 35, 4
priority  = 6,HIt
guardflag = MA
pausetime = 14,13
sparkno = s7003
sparkxy = -10,-70
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = ifelse(p2dist x > 0,-3,3) ,-7
guard.velocity = -7
air.velocity = ifelse(p2dist x > 0,-3,3), -7
forcestand = 1
fall = 1
yaccel = 0.45

[State 1082, set]
type = posset
trigger1 = pos y > 0
y = 0

[State 1082, 5]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y = 0
value = 1090

;--------------------------------------------------------------------
; Tenma Kujin Kyaku (Weak)
;--------------------------------------------------------------------
[Statedef 1085]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1085
ctrl = 0
sprpriority = 3

[State 1085, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 1085, Freeze]
type = posfreeze
trigger1 = time = 0
value = 10

[State 1085, velset]
type = velset
trigger1 = time > 8
x = 8
y = 12

[State 1085, 1]
type = PlaySnd
trigger1 = Time = 10
value = 0, 1
volumescale = 100

[State 1085, Voice]
type = PlaySnd
trigger1 = Time = 8
value = 50,20 ;16
volumescale = 100

[State 1085, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Medium
damage    = 52, 4
priority  = 5
guardflag = MA
pausetime = 8,10
sparkno = s7003
sparkxy = 10,-10
hitsound   = s120,9
guardsound = s5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 17
ground.velocity = -4
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -5.3,4.5
air.fall = 1
fall.recover = 0


[State 1085, PosSet]
type = posset
trigger1 = pos y > 0
y = 0

[State 1085, VelSet]
type = velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 1085, 5]
type = ChangeState
trigger1 = Pos Y = 0
value = 1090
ctrl = 0
;====================================================================
;Land
[Statedef 1090]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
anim = 1090
ctrl = 0
sprpriority = 2
velset = 0,0

[State 1090, Turn]
type = turn
trigger1 = p2dist x < 0

[State 1090, Super C]
type = AfterImageTime
trigger1 = Time = 0
time = 2

[State 1090, VelSet]
type = velset
trigger1 = Time = 0
y = 0

[State 1090, 1]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0
volumescale = 100

[State 1090, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------
; Tenma Kujin Kyaku (Medium)
;--------------------------------------------------------------------
[Statedef 1095]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1085
ctrl = 0
sprpriority = 3

[State 1095, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 3
persistent = 0
ignorehitpause = 1

[State 1095, Freeze]
type = posfreeze
trigger1 = time = 0
value = 10

[State 1095, velset]
type = velset
trigger1 = time > 12 ;8
x = 8
y = 12

[State 1095, 1]
type = PlaySnd
trigger1 = Time = 10
value = 0, 1
volumescale = 100

[State 1095, Voice]
type = PlaySnd
trigger1 = Time = 8
value = 50,20 ;16
volumescale = 100

[State 1095, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Medium
damage    = 52, 4
priority  = 5
guardflag = MA
pausetime = 8,10
sparkno = s7003
sparkxy = 10,-10
hitsound   = s120,9
guardsound = s5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 17
ground.velocity = -4
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -5.3,4.5
air.fall = 1
fall.recover = 0

[State 1095, Mash!!]
type = HitDef
triggerall = Movehit && uniqhitcount < 3
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
attr = S, SA
animtype  = Medium
damage    = 12, 4
priority  = 5
guardflag = MA
pausetime = 8,10
sparkno = s7003
sparkxy = -20,-10
hitsound   = s120,9
guardsound = s5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -4
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -5.3,4.5
fall = ifelse((p2dist Y < 0 || p2statetype = A),1,0)
fall.recover = 0

[State 1095, PosSet]
type = posset
trigger1 = pos y > 0
y = 0

[State 1095, VelSet]
type = velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 1095, 5]
type = ChangeState
trigger1 = Pos Y = 0
value = 1090
ctrl = 1
;--------------------------------------------------------------------
; Tenma Kujin Kyaku (Strong)
;--------------------------------------------------------------------
[Statedef 1100]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1085
ctrl = 0
sprpriority = 3

[State 1100, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 3
persistent = 0
ignorehitpause = 1

[State 1100, Freeze]
type = posfreeze
trigger1 = time = 0
value = 10

[State 1100, velset]
type = velset
trigger1 = time > 12 ;8
x = 8
y = 12

[State 1100, 1]
type = PlaySnd
trigger1 = Time = 10
value = 0, 1
volumescale = 100

[State 1100, Voice]
type = PlaySnd
trigger1 = Time = 8
value = 50,20 ;16
volumescale = 100

[State 1100, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Medium
damage    = 52, 4
priority  = 5
guardflag = MA
pausetime = 8,10
sparkno = s7003
sparkxy = 10,-10
hitsound   = s120,9
guardsound = s5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 17
ground.velocity = -4
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -5.3,4.5
air.fall = 1
fall.recover = 0

[State 1100, Mash!!]
type = HitDef
triggerall = Movehit && uniqhitcount < 6
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
attr = S, SA
animtype  = Medium
damage    = ifelse(Var(0)<5,20,8), 10
priority  = 5
guardflag = MA
pausetime = 10,10
sparkno = s7003
sparkxy = -20,-10
hitsound   = s120,9
guardsound = s5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -4
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -5.3,4.5
fall = ifelse((p2dist Y < 0 || p2statetype = A),1,0)
fall.recover = 0


[State 1100, PosSet]
type = posset
trigger1 = pos y > 0
y = 0

[State 1100, VelSet]
type = velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 1100, 5]
type = ChangeState
trigger1 = Pos Y = 0
value = 1090
ctrl = 1
;--------------------------------------------------------------------
;Hyakki Shuu (Weak)
;--------------------------------------------------------------------
[Statedef 1110]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= 110
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = 3

[State 1110, AirType]
type = statetypeset
trigger1 = animelemtime(2) >= 0
statetype = A

[State 1110, Jump]
type = velset
trigger1 = animelem = 2
y = -7.7
x = 3.3

[State 1110, Gravity]
type = veladd
trigger1 = 1
y = 0.45

[State 1110, Land]
type = velset
trigger1 = Pos Y > 0 && vel Y > 0 && Time >= 10
y = 0

[State 1110, Land]
type = Posset
trigger1 = Pos Y > 0 && Time >= 10
y = 0

[State 1110, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 50, 11
volumescale = 100
channel = 1

[State 1110, No input]
type = ChangeState
trigger1 = Pos Y = 0 && Time >= 10
value = 1111
ctrl = 0

[State 1110, Turn]
type = turn
triggerall = time > 5 && p2dist x < 0
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = command = "x"
trigger5 = command = "y"
trigger6 = command = "z"

[State 1110, Punch]
type = ChangeState
triggerall = time > 5
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
value = 1113
ctrl = 0

[State 1110, BodySlam]
type = ChangeState
triggerall = time > 1
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
value = 1114
ctrl = 0
;====================================================================
;Sliding Sweep
;====================================================================
[Statedef 1111]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 50
anim = 1111
ctrl = 0
sprpriority = 3

[State 1111, Turn]
type = turn
trigger1 = !time && p2dist x < 0

[State 1111, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 50, 20
volumescale = 100
channel = 1

[State 1110, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 40, 1
volumescale = 100

[State 1111, Land]
type = velset
trigger1 = Pos Y > 0 && vel Y > 0
y = 0

[State 1111, Vel]
type = velset
trigger1 = Time = 0
x = 12

[State 1111, Land]
type = posset
trigger1 = Pos Y > 0 && vel Y > 0
y = 0

[State 1111, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, SA
damage    = 100,40
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = s7003
sparkxy = -10,-15
hitsound   = s120,9
guardsound = s5,0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -3.9,-4.8
air.velocity = -1.2,-3.8
guard.velocity = -5
fall = 1
fall.recover = 0


[State 1111, End]
type = ChangeState
trigger1 = animtime = 0
value = 1112
ctrl = 0
;====================================================================
[Statedef 1112]
type    = S
movetype= A
physics = S
juggle  = 6
anim = 1112
ctrl = 0
sprpriority = 3

[State 1112, Land]
type = velset
trigger1 = time = 0
y = 0

[State 1112, Land]
type = posset
trigger1 = time = 0
y = 0

[State 1112, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;====================================================================
;Punch
;====================================================================
[Statedef 1113]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 1113
ctrl = 0
sprpriority = 3

[State 1113, Gravity]
type = veladd
trigger1 = 1
y = 0.45

[State 1113, VelX]
type = velmul
trigger1 = time = 0
x= 0.9

[State 1113, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 70
guardflag = HA
priority = 4
pausetime = 18,18
sparkno = s7003
sparkxy = -10,-50
hitsound   = s120,6
guardsound = s5,0
animtype = Hard
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -1.3,6.3
air.velocity = -9.9,5.0
fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 2
envshake.freq = 176
fall.envshake.time = 15
fall.envshake.freq = 176
fall.envshake.ampl = 3
yaccel = 0.60
fall.envshake.time = 15
fall.envshake.freq = 176
fall.envshake.ampl = 3

[State 1113, Land]
type = posset
trigger1 = Pos Y > 0 && vel Y > 0
y = 0

[State 1113, End]
type = ChangeState
trigger1 = Pos Y = 0
value = 1062
ctrl = 0
;====================================================================
;Dive Kick
;====================================================================
[Statedef 1114]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1087
ctrl = 0
sprpriority = 3

[State 1114, VarAdd]
type = VarAdd
trigger1 = (NumTarget > 0) && (MoveHit)
var(0) = 1
persistent = 0
ignorehitpause = 1

[State 1114, PosAdd]
type = posadd
trigger1 = !time
y = -6

[State 1114, Freeze]
type = posfreeze
trigger1 = time = 0
value = 6

[State 1114, velset]
type = velset
trigger1 = time > 8
x = 8
y = 12

[State 1114, 1]
type = PlaySnd
trigger1 = Time = 10
value = 0, 1
volumescale = 100

[State 1114, Voice]
type = PlaySnd
trigger1 = Time = 8
value = 50,20 ;16
volumescale = 100

[State 1114, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Medium
damage    = 52, 4
priority  = 5
guardflag = MA
pausetime = 8,10
sparkno = s7003
sparkxy = 10,-10
hitsound   = s120,9
guardsound = s5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 17
ground.velocity = -4
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -5.3,4.5
air.fall = 1
fall.recover = 0


[State 1114, PosSet]
type = posset
trigger1 = pos y > 0
y = 0

[State 1114, VelSet]
type = velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 1114, 5]
type = ChangeState
trigger1 = Pos Y = 0
value = 1090
ctrl = 0
;====================================================================
[Statedef 1115]
type    = L
movetype= A
physics = S
juggle  = 6
anim = 1115
ctrl = 0
sprpriority = 3

[State 1115, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 40, 1
volumescale = 100

[State 1115, Land]
type = velset
trigger1 = Time = 0
y = 0

[State 1115, Land]
type = posset
trigger1 = Time = 0
y = 0

[State 1115, End]
type = ChangeState
trigger1 = Time = 40
value = 5120
ctrl = 1
;--------------------------------------------------------------------
;Hyakki Shuu (Medium)
;--------------------------------------------------------------------
[Statedef 1120]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= 110
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = 3

[State 1120, AirType]
type = statetypeset
trigger1 = animelemtime(2) >= 0
statetype = A

[State 1120, Jump]
type = velset
trigger1 = animelem = 2
y = -7.2
x = 5

[State 1120, Gravity]
type = veladd
trigger1 = 1
y = 0.45

[State 1120, Land]
type = velset
trigger1 = Pos Y > 0 && vel Y > 0 && Time >= 10
y = 0

[State 1120, Land]
type = Posset
trigger1 = Pos Y > 0 && Time >= 10
y = 0

[State 1120, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 50, 11
volumescale = 100
channel = 1

[State 1120, No input]
type = ChangeState
trigger1 = Pos Y = 0 && Time >= 10
value = 1111
ctrl = 0

[State 1120, Turn]
type = turn
triggerall = time > 5 && p2dist x < 0
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = command = "x"
trigger5 = command = "y"
trigger6 = command = "z"

[State 1120, Punch]
type = ChangeState
triggerall = time > 5
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
value = 1113
ctrl = 0

[State 1120, BodySlam]
type = ChangeState
triggerall = time > 1
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
value = 1114
ctrl = 0
;--------------------------------------------------------------------
;Hyakki Shuu (Strong)
;--------------------------------------------------------------------
[Statedef 1130]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= 110
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = 3

[State 1130, AirType]
type = statetypeset
trigger1 = animelemtime(2) >= 0
statetype = A

[State 1130, Jump]
type = velset
trigger1 = animelem = 2
y = -10.2
x = 5.2

[State 1130, Gravity]
type = veladd
trigger1 = 1
y = 0.5

[State 1130, Land]
type = velset
trigger1 = Pos Y > 0 && vel Y > 0 && Time >= 10
y = 0

[State 1130, Land]
type = Posset
trigger1 = Pos Y > 0 && Time >= 10
y = 0

[State 1130, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 50, 11
volumescale = 100
channel = 1

[State 1130, No input]
type = ChangeState
trigger1 = Pos Y = 0 && Time >= 10
value = 1111
ctrl = 0

[State 1130, Turn]
type = turn
triggerall = time > 5 && p2dist x < 0
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = command = "x"
trigger5 = command = "y"
trigger6 = command = "z"

[State 1130, Punch]
type = ChangeState
triggerall = time > 5
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
value = 1113
ctrl = 0

[State 1130, BodySlam]
type = ChangeState
triggerall = time > 1
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
value = 1114
ctrl = 0

;--------------------------------------------------------------------
;Gou Zankuu (Weak)
;--------------------------------------------------------------------
[Statedef 1140]
type    = A
movetype= A
physics = N
juggle  = 6
poweradd= 110
anim = 1140
ctrl = 0
sprpriority = 3

[State 1140, Gravity]
type = veladd
trigger1 = 1
y = 0.45

[State 1140, ShinZankuu]
type = Helper
trigger1 = Var(7) = 1
trigger1 = AnimElemtime(1) = 1
name = "Gou_Zankuu1"
postype = P1
pos = 70,-48
ownpal = 1
stateno = 1141
id = 1141 

[State 1140, Zankuu]
type = Helper
trigger1 = AnimElemtime(3) = 1
name = "Gou_Zankuu2"
postype = P1
pos = 72,-43
ownpal = 1
stateno = 1141
id = 1141 

[State 1140, Voice]
type = playsnd
trigger1 = Var(7) = 1
trigger1 = AnimElemtime(1) = 1
trigger2 = AnimElemtime(3) = 1
value = 50,15
volumescale = 100
channel = 1

[State 1140, Effect]
type = playsnd
trigger1 = Var(7) = 1
trigger1 = AnimElemtime(1) = 1
trigger2 = AnimElemtime(3) = 1
value = 122,7
volumescale = 100

[State 1140, Set]
type = velset
trigger1 = pos Y > 2
trigger1 = vel y > 0
y = 0

[State 1140, Set]
type = posset
trigger1 = pos Y > 2
y = 0

[State 1140, BodySlam]
type = ChangeState
trigger1 = Pos Y = 0
value = 1062
ctrl = 0
;====================================================================
;Zankuu (Weak)
;====================================================================
[Statedef 1141]
type    = A
movetype= A
physics = N
juggle  = 6
velset = 4,3
anim = ifelse(parent, var(7),1143,1141)
ctrl = 0
sprpriority = 5

[State 1141, vulmul]
type = velmul
trigger1 = !time
x = 0.7
y = 0.7


[State 1141, Set]
type = posset
trigger1 = Pos Y > 4
y = 4

[State 1141, Set]
type = velset
trigger1 = Pos Y > 4 && vel Y > 0
y = 4

[State 1141, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1141, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 1142
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1141, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1141, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S,SP
hitflag = MA
guardflag = MA
animtype = Hard
priority = 5,hit
damage = 40,20
sparkno = s7003
hitsound = s120,6
guardsound = s5,0
pausetime = 0,7
guard.pausetime = 0,14
ground.hittime = 23
air.hittime = 23
ground.velocity = -5.5,0
ground.type = High
air.velocity = -6,-3
ground.slidetime = 18
air.fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 1003, Hit]
type = parentvarset
trigger1 = movehit
v = 18
value = 1
ignorehitpause = 1

[State 1141, End]
type = ChangeState
trigger1 = Pos Y = 4
trigger2 = movecontact
value = 1142
ctrl = 0
;====================================================================
;Dissolve
;--------------------------------------------------------------------
[Statedef 1142]
type    = A
movetype= A
physics = N
juggle  = 6
velset = 0,0
anim = 1142
ctrl = 0
sprpriority = 5

[State 1142, ProjHit]
type = parentvarset
trigger1 = time = 0
v = 18
value = 1
ignorehitpause = 1

[State 1003, Hit]
type = parentvarset
trigger1 = animtime = 0
v = 18
value = 0
ignorehitpause = 1

[State 1142, Re-set]
type = ParentVarSet
trigger1 = time = 0
v = 16
value = 0

[State 1142, Effect]
type = playsnd
trigger1 = time = 0
value = 120,0
volumescale = 100

[State 1142, Fizzleout]
type = destroyself
trigger1 = animtime = 0
;--------------------------------------------------------------------
;Gou Zankuu (Medium)
;--------------------------------------------------------------------
[Statedef 1145]
type    = A
movetype= A
physics = N
juggle  = 6
poweradd= 110
anim = 1140
ctrl = 0
sprpriority = 3

[State 1145, Gravity]
type = veladd
trigger1 = 1
y = 0.45

[State 1145, ShinZankuu]
type = Helper
trigger1 = Var(7) = 1
trigger1 = AnimElemtime(1) = 1
name = "Gou_Zankuu3"
postype = P1
pos = 70,-48
ownpal = 1
stateno = 1146
id = 1146 

[State 1145, Zankuu]
type = Helper
trigger1 = AnimElemtime(3) = 1
name = "Gou_Zankuu4"
postype = P1
pos = 72,-43
ownpal = 1
stateno = 1146
id = 1146 

[State 1145, Voice]
type = playsnd
trigger1 = Var(7) = 1
trigger1 = AnimElemtime(1) = 1
trigger2 = AnimElemtime(3) = 1
value = 50,15
volumescale = 100
channel = 1

[State 1145, Effect]
type = playsnd
trigger1 = Var(7) = 1
trigger1 = AnimElemtime(1) = 1
trigger2 = AnimElemtime(3) = 1
value = 122,7
volumescale = 100

[State 1145, Set]
type = velset
trigger1 = pos Y > 2
trigger1 = vel y > 0
y = 0

[State 1145, Set]
type = posset
trigger1 = pos Y > 2
y = 0

[State 1145, BodySlam]
type = ChangeState
trigger1 = Pos Y = 0
value = 1062
ctrl = 0
;====================================================================
;Zankuu
;====================================================================
[Statedef 1146]
type    = A
movetype= A
physics = N
juggle  = 6
velset = 4.2,3.2
anim = ifelse(parent, var(7),1143,1141)
ctrl = 0
sprpriority = 5

[State 1141, vulmul]
type = velmul
trigger1 = !time
x = 0.9
y = 0.9

[State 1146, Set]
type = posset
trigger1 = Pos Y > 4
y = 4

[State 1146, Set]
type = velset
trigger1 = Pos Y > 4 && vel Y > 0
y = 4

[State 1146, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1146, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 1142
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1146, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1146, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S,SP
hitflag = MA
guardflag = MA
animtype = Hard
priority = 5,hit
damage = 40,20
sparkno = s7003
hitsound = s120,6
guardsound = s5,0
pausetime = 0,7
guard.pausetime = 0,14
ground.hittime = 23
air.hittime = 23
ground.velocity = -5.5,0
ground.type = High
air.velocity = -6,-3
ground.slidetime = 18
air.fall =1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 1003, Hit]
type = parentvarset
trigger1 = movehit
v = 18
value = 1
ignorehitpause = 1

[State 1146, End]
type = ChangeState
trigger1 = Pos Y = 4
trigger2 = movecontact
value = 1142
ctrl = 0
;--------------------------------------------------------------------
;Gou Zankuu (Strong)
;--------------------------------------------------------------------
[Statedef 1150]
type    = A
movetype= A
physics = N
juggle  = 6
poweradd= 110
anim = 1140
ctrl = 0
sprpriority = 3

[State 1150, Gravity]
type = veladd
trigger1 = 1
y = 0.45

[State 1150, ShinZankuu]
type = Helper
;trigger1 = Var(7) = 1
trigger1 = AnimElemtime(1) = 1
name = "Gou_Zankuu5"
postype = P1
pos = ifelse(var(7),60,70),ifelse(var(7),-50,-48) ;70,-48
ownpal = 1
stateno = 1151
id = 1151 

[State 1150, Zankuu]
type = Helper
trigger1 = AnimElemtime(3) = 1
name = "Gou_Zankuu6"
postype = P1
pos = ifelse(var(7),63,72),ifelse(var(7),-30,-43);72,-43
ownpal = 1
stateno = 1151
id = 1151 

[State 1150, Voice]
type = playsnd
trigger1 = AnimElemtime(1) = 1
trigger2 = AnimElemtime(3) = 1
value = 50,15
volumescale = 100
channel = 1

[State 1150, Effect]
type = playsnd
trigger1 = AnimElemtime(1) = 1
trigger2 = AnimElemtime(3) = 1
value = 122,7
volumescale = 100

[State 1150, Set]
type = velset
trigger1 = pos Y > 2
trigger1 = vel y > 0
y = 0

[State 1150, Set]
type = posset
trigger1 = pos Y > 2
y = 0

[State 1150, BodySlam]
type = ChangeState
trigger1 = Pos Y = 0
value = 1062
ctrl = 0
;====================================================================
;Zankuu
;====================================================================
[Statedef 1151]
type    = A
movetype= A
physics = N
juggle  = 6
velset = 4.7,3.7
anim = ifelse(parent, var(7),1143,1141)
ctrl = 0
sprpriority = 5

[State 1141, vulmul]
type = null;velmul
trigger1 = !time
x = 0.9
y = 0.9

[State 1151, Set]
type = posset
trigger1 = Pos Y > 4
y = 4

[State 1151, Set]
type = velset
trigger1 = Pos Y > 4 && vel Y > 0
y = 4

[State 1151, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1151, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 1142
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1151, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1151, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S,SP
hitflag = MA
guardflag = MA
animtype = Hard
priority = 5,hit
damage = 40,20
sparkno = s7003
hitsound = s120,6
guardsound = s5,0
pausetime = 0,7
guard.pausetime = 0,14
ground.hittime = 18
air.hittime = 18
ground.velocity = -5.5,0
ground.type = High
air.velocity = -6,-3
ground.slidetime = 18
air.fall = 1
fall.recover = 0
yaccel = 0.90
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 1003, Hit]
type = parentvarset
trigger1 = movehit
v = 18
value = 1
ignorehitpause = 1

[State 1151, End]
type = ChangeState
trigger1 = Pos Y = 4
trigger2 = movecontact
value = 1142
ctrl = 0

;--------------------------------------------------------------------
;Shakunetsu Gou Hadou (Weak)
;--------------------------------------------------------------------
[Statedef 1160]
type = S
movetype= A
physics = S
juggle = 4
poweradd= 110
velset = 0,0
anim = ifelse(Var(7) = 0,1050,1160)
ctrl = 0
sprpriority = 2

[State 1160, Voice]
type = PlaySnd
trigger1 = time = 0
value = 50, 6
volumescale = 100
channel = 1

[State 1160, 7]
type = ChangeAnim
trigger1 = time = 15
value = 1010


[State 1160, Voice]
type = PlaySnd
trigger1 = anim = 1010 && animelem = 4
value = 50, 10
volumescale = 100
channel = 1

[State 1160, Hadou_SND]
type = playsnd
trigger1 = anim = 1010 && animelem = 4
value = 122,7
volumescale = 100

[State 1160, Shakunetsu_Hadouken3]
type = Helper
triggerall = !numhelper(1161)
trigger1 = AnimElemtime(4) = 1 && anim = 1010 && time < 30
name = "Shaku_Hadou3"
postype = P1
pos = 57,-55
ownpal = 1
stateno = 1161
id = 1161 

[State 1160, Recover]
type = changestate
trigger1 = anim = 1010 && time = 45
value = 0
ctrl = 1

;======================================================================
;Shaku_Hadouken 1
;======================================================================
[Statedef 1161]
type = A
movetype= A
physics = N
sprpriority = 5
velset = 0,0

[State 1161, hitoverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=ifelse(var(2)<3,1161,1003)
ignorehitpause=1

[State 1161,hitby]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1161, anim]
type=changeanim
trigger1= !time && !prevstateno
value=1165

[State 1161, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 1161, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
var(3)=1
ignorehitpause=1

[State 1161, vel]
type=velset
trigger1= 1
x=ifelse((time<2 && var(2)>1),0,7.2)
y=0

[State 1161, InPlay]
type = parentvarset
trigger1 = time = 0
v = 11
value = 1

[State 1161, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1161, Hitdef]
type = HitDef
trigger1 = !time
attr = S, HP
animtype = hard
damage = 32, 12
getpower = 0
priority = 4
guardflag = M
hitflag = MAF
pausetime = 0,9 ;4,9
guard.pausetime = 0,9
sparkno = s7004
Guard.Sparkno = -1
sparkxy = 2,-5
hitsound = s120,6
guardsound = s5,0
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -2.3,-9
guard.velocity = -7.5
air.velocity = -2.3,-9
airguard.velocity = -5, -4
yaccel = 0.5
fall = 1
fall.recover = 0
yaccel = 0.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p1sprpriority = 5	

[State 1161, Reset]
type = varset
trigger1 = frontedgedist < -100
trigger2 = backedgedist < -100
trigger3 = parent, var(16) = 0
trigger4 = hitcount = 1
v = 8
value = 0

[State 1161, NotInPlay]
type = parentvarset
trigger1 = pos x!=[-240,240]
v = 11
value = 0

[State 1161, end]
type=changestate
trigger1= movecontact
value=ifelse(var(2)<1,1162,1003)
ignorehitpause = 1

[State 1161, end]
type=destroyself
trigger1=pos x!=[-240,240]
;=============================================================
;Projectile Hitpause
;=============================================================
[Statedef 1162]
type = A
movetype= A
physics = N
juggle = 0
velset = 0,0
anim = 1160
ctrl = 0
sprpriority = 6
hitcountpersist = 1

[State 1162, moveguarded]
type = varset
trigger1 = numtarget
trigger1 = target, stateno = [130,199]
var(30) = 1

[State 1162, hitspark]
type = null;Explod
trigger1 = time = 0 && !var(30)
anim = 7004
id = 7004
postype = p1
sprpriority = 5
pos = -3, -5
ignorehitpause = 0

[State 1162, GuardSpark]
type = null;Helper
trigger1 = !time && var(30)
trigger1 = frontedgedist > -70
trigger1 = backedgedist > -70
name = "guard"
postype = P1
pos = 0, -25
ownpal = 1
stateno = 8034
id = 8034
supermovetime = 9999
ignorehitpause = 1

[State 1162, Noshadaw]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1162, movehitSND]
type = playsnd
trigger1 = time = 0 && !var(30)
value = 120,6
ignorehitpause = 0

[State 1162, EnterPrevState]
type = changestate
trigger1 = time = 4 && !Var(30)
trigger2 = time = 5 && Var(30)
value = prevstateno


;--------------------------------------------------------------------
;Shakunetsu Gou Hadou (Medium)
;--------------------------------------------------------------------
[Statedef 1165]
type = S
movetype= A
physics = S
juggle = 4
poweradd= 110
velset = 0,0
anim = ifelse(Var(7) = 0,1050,1160)
ctrl = 0
sprpriority = 2

[State 1165, Voice]
type = PlaySnd
trigger1 = time = 0
value = 50, 6
volumescale = 100
channel = 1

[State 1165, Voice]
type = PlaySnd
trigger1 = anim = 1010 && animelem = 4
value = 50, 10
volumescale = 100
channel = 1

[State 1165, Hadou_SND]
type = playsnd
trigger1 = anim = 1010 && animelem = 4
value = 122,7
volumescale = 100

[State 1165, 7]
type = ChangeAnim
trigger1 = time = 17
value = 1010

[State 1165, Shakunetsu_Hadouken3]
type = Helper
triggerall = !numhelper(1166)
trigger1 = AnimElemtime(4) = 1 && anim = 1010 && time < 30
name = "Shaku_Hadou3"
postype = P1
pos = 57,-55
ownpal = 1
stateno = 1166
id = 1166 

[State 1165, Recover]
type = changestate
trigger1 = anim = 1010 && time = 47
value = 0
ctrl = 1

;======================================================================
;Shaku_Hadouken 2
;======================================================================
[Statedef 1166]
type = A
movetype= A
physics = N
sprpriority = 5
velset = 0,0

[State 1166, hitoverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=ifelse(var(2)<3,1166,1003)
ignorehitpause=1

[State 1166,hitby]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1166, anim]
type=changeanim
trigger1= !time && !prevstateno
value=1165

[State 1166, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 1166, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
var(3)=1
ignorehitpause=1

[State 1166, vel]
type=velset
trigger1= 1
x=ifelse((time<2 && var(2)>1),0,7.2)
y=0

[State 1166, InPlay]
type = parentvarset
trigger1 = time = 0
v = 11
value = 1

[State 1166, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1166, Hitdef]
type = HitDef
trigger1 = var(2) <=1
attr = S, HP
animtype = hard
damage = 32, 12
getpower = 0
priority = 4
guardflag = M
hitflag = MAF
pausetime = 0,9 ;4,9
guard.pausetime = 0,9
sparkno = s7004
Guard.Sparkno = -1
sparkxy = 2,-5
hitsound = -1;s120,6
guardsound = -1
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -5.7,0
guard.velocity = -7.5
air.velocity = -4.7,-7
airguard.velocity = -5, -4
yaccel = 0.5
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p1sprpriority = 5

[State 1166, Hitdef]
type = HitDef
trigger1 = !time && var(2) =2
attr = S, HP
animtype = hard
damage = 32, 12
getpower = 0
priority = 4
guardflag = M
hitflag = MAF
pausetime = 0,9 ;4,9
guard.pausetime = 0,9
sparkno = s7004
Guard.Sparkno = -1
sparkxy = 2,-5
hitsound = -1;s300,4
guardsound = -1
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -2.3,-9
guard.velocity = -7.5
air.velocity = -2.3,-9
airguard.velocity = -5, -4
yaccel = 0.5
fall = 1
fall.recover = 0
yaccel = 0.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p1sprpriority = 5
palfx.time = 40 ;20
palfx.add = 217,61,0
palfx.sinadd = -255,-255,-255,80 ; 40
palfx.color = 20

[State 1166, Reset]
type = varset
trigger1 = frontedgedist < -100
trigger2 = backedgedist < -100
trigger3 = parent, var(16) = 0
trigger4 = hitcount = 2
v = 8
value = 0

[State 1166, NotInPlay]
type = parentvarset
trigger1 = pos x!=[-240,240]
v = 11
value = 0

[State 1166, end]
type=changestate
trigger1= movecontact
value=ifelse(var(2)<2,1167,1003)
ignorehitpause = 1

[State 1166, end]
type=destroyself
trigger1=pos x!=[-240,240]
;=============================================================
;Projectile Hitpause
;=============================================================
[Statedef 1167]
type = A
movetype= A
physics = N
juggle = 0
velset = 0,0
anim = 1165
ctrl = 0
sprpriority = 6
hitcountpersist = 1

[State 1167, moveguarded]
type = varset
trigger1 = numtarget
trigger1 = target, stateno = [130,199]
var(30) = 1

[State 1167, hitspark]
type = null;Explod
trigger1 = time = 0 && !var(30)
anim = 7004
id = 7004
postype = p1
sprpriority = 5
pos = -3, -5
ignorehitpause = 0

[State 1167, GuardSpark]
type = null;Helper
trigger1 = !time && var(30)
trigger1 = frontedgedist > -70
trigger1 = backedgedist > -70
name = "guard"
postype = P1
pos = 0, -25
ownpal = 1
stateno = 8034
id = 8034
supermovetime = 9999
ignorehitpause = 1

[State 1167, Noshadaw]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1167, movehitSND]
type = playsnd
trigger1 = time = 0 && !var(30)
value = 120,6
ignorehitpause = 0
channel = 6

[State 1167, moveguardSND]
type = playsnd
trigger1 = time = 0 && var(30)
value = 5,0
ignorehitpause = 0
channel = 6

[State 1167, EnterPrevState]
type = changestate
trigger1 = time = 4 && !Var(30)
trigger2 = time = 5 && Var(30)
value = prevstateno

 
;--------------------------------------------------------------------
;Shakunetsu Gou Hadou (Strong)
;--------------------------------------------------------------------
[Statedef 1170]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = ifelse(Var(7) = 0,1050,1160)
ctrl = 0
sprpriority = 2

[State 1170, Voice]
type = PlaySnd
trigger1 = time = 0
value = 50, 6
volumescale = 100
channel = 1

[State 1170, 7]
type = ChangeAnim
trigger1 = time = 20
value = 1010

[State 1170, Voice]
type = PlaySnd
trigger1 = anim = 1010 && animelem = 4
value = 50, 10
volumescale = 100
channel = 1

[State 1170, Hadou_SND]
type = playsnd
trigger1 = anim = 1010 && animelem = 4
value = 122,7
volumescale = 100

[State 1170, Shakunetsu_Hadouken3]
type = Helper
triggerall = !numhelper(1171)
trigger1 = AnimElemtime(4) = 1 && anim = 1010
name = "Shaku_Hadou3"
postype = P1
pos = 57,-55
ownpal = 1
stateno = 1171
id = 1171 

[State 1170, Recover]
type = changestate
trigger1 = anim = 1010 && time = 50
value = 0
ctrl = 1

;======================================================================
;Shaku_Hadouken 3
;======================================================================
[Statedef 1171]
type    = A
movetype= A
physics = N
sprpriority = 5
velset = 0,0

[State 1171, hitoverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=ifelse(var(2)<3,1171,1003)
ignorehitpause=1

[State 1171,hitby]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1171, anim]
type=changeanim
trigger1= !time && !prevstateno
value=1165

[State 1171, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 1171, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
var(3)=1
ignorehitpause=1

[State 1171, vel]
type=velset
trigger1= 1
x=ifelse((time<2 && var(2)>1),0,7.2)
y=0

[State 1171, InPlay]
type = parentvarset
trigger1 = time = 0
v = 11
value = 1

[State 1171, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1171, Hitdef]
type = HitDef
trigger1 = !time && var(2) <1
attr = S, HP
animtype  = hard
damage    = 32, 12
getpower  = 0
priority  = 4
guardflag = M
hitflag = MAF
pausetime = 0,9 ;4,9
guard.pausetime = 0,9
sparkno = s7004
Guard.Sparkno = -1
sparkxy = 2,-5
hitsound   = -1;s120,6
guardsound = -1
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.7,0
guard.velocity = -7.5
air.velocity = -4.7,-7
airguard.velocity = -5, -4
yaccel = 0.5
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p1sprpriority = 5

[State 1171, Hitdef]
type = HitDef
trigger1 = !time && var(2) <3
attr = S, HP
animtype  = hard
damage    = 32, 12
getpower  = 0
priority  = 4
guardflag = M
hitflag = MAF
pausetime = 0,9 ;4,9
guard.pausetime = 0,9
sparkno = s7004
Guard.Sparkno = -1
sparkxy = 2,-5
hitsound   = -1;s120,6
guardsound = -1
ground.type = low
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.7,0
guard.velocity = -7.5
air.velocity = -4.7,-7
airguard.velocity = -5, -4
yaccel = 0.5
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p1sprpriority = 5

[State 1171, Hitdef]
type = HitDef
trigger1 = !time && var(2) >=3
attr = S, HP
animtype  = hard
damage    = 32, 12
getpower  = 0
priority  = 4
guardflag = M
hitflag = MAF
pausetime = 0,9 ;4,9
guard.pausetime = 0,9
sparkno = s7004
Guard.Sparkno = -1
sparkxy = 2,-5
hitsound   = -1;s120,6
guardsound = -1
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2.3,-9
guard.velocity = -7.5
air.velocity = -2.3,-9
airguard.velocity = -5, -4
yaccel = 0.5
fall = 1
fall.recover = 0
yaccel = 0.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p1sprpriority = 5
palfx.time = 40 ;20
palfx.add = 217,61,0
palfx.sinadd = -255,-255,-255,80 ; 40
palfx.color = 20

[State 1171, Reset]
type = varset
trigger1 = frontedgedist < -100
trigger2 = backedgedist < -100
trigger3 = parent, var(16) = 0
trigger4 = hitcount = 3
v = 8
value = 0

[State 1171, NotInPlay]
type = parentvarset
trigger1 = pos x!=[-240,240]
v = 11
value = 0

[State 1171, end]
type=changestate
trigger1= movecontact
value=ifelse(var(2)<3,1172,1003)
ignorehitpause = 1

[State 1171, end]
type=destroyself
trigger1=pos x!=[-240,240]
;=============================================================
;Projectile Hitpause
;=============================================================
[Statedef 1172]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
anim = 1165
ctrl = 0
sprpriority = 6
hitcountpersist = 1

[State 1172, moveguarded]
type = varset
trigger1 = numtarget
trigger1 = target, stateno = [130,199]
var(30) = 1

[State 1172, hitspark]
type = null;Explod
trigger1 = time = 0 && !var(30)
anim = 7004
id = 7004
postype = p1
sprpriority = 5
pos = -3, -5
ignorehitpause = 0

[State 1172, GuardSpark]
type = null;Helper
trigger1 = !time && var(30)
trigger1 = frontedgedist > -70
trigger1 = backedgedist > -70
name = "guard"
postype = P1
pos = 0, -25
ownpal = 1
stateno = 8034
id = 8034
supermovetime = 9999
ignorehitpause = 1

[State 1172, Noshadaw]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1172, movehitSND]
type = playsnd
trigger1 = time = 0 && !var(30)
value = 120,6
ignorehitpause = 0
channel = 6

[State 1172, moveguardSND]
type = playsnd
trigger1 = time = 0 && var(30)
value = 5,0
ignorehitpause = 0
channel = 6

[State 1172, EnterPrevState]
type = changestate
trigger1 = time = 4 && !Var(30)
trigger2 = time = 5 && Var(30)
value = prevstateno

;----------------------------------------------------------------------
; Super Arts
;----------------------------------------------------------------------
; Messatsu Gou Shoryuu
;----------------------------------------------------------------------
[Statedef 3000]
type    = S
movetype= A
physics = N
;juggle  = Ifelse(prevstateno != 1040,1,16) ;1=18
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 3

[State 3000, SuperCharge]
type = Helper
trigger1 = Time = 0
name = "Super"
postype = P1
pos = 23,-47
ownpal = 1
size.xscale = 1
size.yscale = 1
stateno = 3200
id = 3200
supermovetime = 9999

[State 3000, VarAdd]
type = VarAdd
triggerall = (NumTarget > 0) && (MoveHit)
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 7
trigger5 = animelem = 8
trigger6 = animelem = 9
trigger7 = animelem = 13
trigger8 = animelem = 14
trigger9 = animelem = 15
var(0) = 5
persistent = 0
ignorehitpause = 1

[State 3000, SuperBG]
type = null;bgpalfx
trigger1 = time = 0
add = 0,0,255
sinadd = 255,255,255,40 ;time 170
time = 40

[State 3000, SuperBG]
type = bgpalfx
trigger1 = time = 0
add = -128,-128,-128
time = 45

[State 3000, Messatsu!!]
type = PlaySnd
trigger1 = time = 0
value = 90, 0
volumescale = 100
channel = 0

[State 3000, Super A]
type = SuperPause
trigger1 = time = 0
pos = 25, -57
anim = -1
sound = s3000, 1
poweradd = -1000
time = 45
darken = 0

[State 3050, Blue Shadows]
type = Afterimage
trigger1 = Time = 0
time = 999
length = 20
palbright = 50,50,255
palcontrast = 255,255,255
palpostbright = 50,50,255
PalAdd = -40,-40,0
PalMul = 0.7,0.7,0.7
FrameGap = 5

[State 3050, Red Shadows]
type = null;Afterimage
trigger1 = Time = 0
time = 999
length = 30
PalPostBright = 0,0,0
PalContrast = 160,20,20
PalAdd      =   0, 0, 0
PalMul      =  1.5 ,1.5 ,1.5
FrameGap = 10


[State 3000, Super D]
type = NotHitBy
trigger1 = AnimElem = 2
value = , NA, SA, AT
time = 12

[State 3000, Super E]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 10

[State 3000, 1]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 13
value = 0, 3

[State 3000, 4]
type = VelSet
trigger1 = time = 1
x = 10

[State 3000, Slowdown]
type = Velset
trigger1 = animelem = 3
trigger2 = animelem = 9
x = 1.9

[State 3000, 4]
type = VelSet
trigger1 = AnimElem = 7
x = 13

[State 3000, 4]
type = VelSet
trigger1 = AnimElem = 13
x = 2;9

[State 3000, 4]
type = VelSet
trigger1 = AnimElemtime(15) = 1
y = -13
x = 7

[State 1041, 2]
type = Veladd
trigger1 = Time >= 0 && AnimElemtime(15) > 1 && Vel X > 0
x = -0.36 ;.30

[State 1041, 3]
type = VelAdd
trigger1 = Time >= 0 && AnimElemtime(15) > 1
y = .46

[State 3000, Voice1]
type = playsnd
trigger1 = animelemtime(1) = 2
value = 50,10
volumescale = 100

[State 3000, Voice2]
type = playsnd
trigger1 = animelem = 7
value = 50,20
volumescale = 100

[State 3000, Voice3]
type = playsnd
trigger1 = animelem = 15
value = 50,0
volumescale = 100

[State 3000, Hit1]
type = HitDef
trigger1 = AnimElemTime(1) = 2
trigger2 = AnimElem = 7
attr = S, HA
animtype  = Hard
damage    = ifelse(Var(0)<8,20,10),4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 4,4
sparkno = s7004
guard.sparkno = s7006
sparkxy = -5,-48
hitsound   = s120,6
guardsound = s5,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -8
air.velocity = -3,-3
air.fall = 1
fall.animtype = Hard
fall.recover = 0
p2facing = 1


[State 3000, Hit2]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 8
attr = S, HA
animtype  = Light
damage    = ifelse(Var(0)<8,20,10),4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 4,4
sparkno = s7004
guard.sparkno = s7006
sparkxy = -10,-60
hitsound   = s120,6
guardsound = s5,0
ground.type = Low
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -8,0
guard.velocity = -3
air.velocity = -3,-3.2
airguard.velocity = -3,-1
fall.animtype = Hard
fall.recover = 0
p2facing = 1

[State 3000, Hit3]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 9
attr = S, HA
animtype  = Hard
damage    = ifelse(Var(0)<8,20,10),4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 4,4
sparkno = s7004
guard.sparkno = s7006
sparkxy = -10,-90
hitsound   = s120,6
guardsound = s5,0
ground.type = High
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -6,0
guard.velocity = -3
air.velocity = -3,-3.2
airguard.velocity = -3,-1
fall.animtype = Hard
fall.recover = 0
p2facing = 1

[State 3000, Hit4]
type = HitDef
trigger1 = AnimElem = 13
attr = S, HA
animtype  = Hard
damage    = ifelse(Var(0)<5,80,40),4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 18,18
sparkno = s7004
guard.sparkno = s7006
sparkxy = -5,-48
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -1,-3.2
guard.velocity = -3
air.velocity = -3,-3.2
airguard.velocity = -3,-3
fall.animtype = Hard
fall = 1
fall.recover = 0
envshake.time = 6
envshake.ampl = 4
envshake.freq = 140
p2facing = 1

[State 3000, Hit5]
type = HitDef
trigger1 = AnimElem = 14
attr = S, HA
animtype  = Hard
fall.animtype =light
damage    = ifelse(Var(0)<5,80,40),4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 18,18
sparkno = s7004
guard.sparkno = s7006
sparkxy = -10,-60
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -3,-5
guard.velocity = -12
air.velocity = -3,-3.2
airguard.velocity = -3,-3
fall = 1
fall.recover = 0
envshake.time = 6
envshake.ampl = 4
envshake.freq = 140
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 3000, Hit6]
type = HitDef
trigger1 = AnimElem = 15
attr = S, HA
animtype  = up
damage    = ifelse(Var(0)<5,80,40),4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 20,21
sparkno = s7004
guard.sparkno = s7006
sparkxy = -10,-90
hitsound   = s120,9
guardsound = s5,0
ground.type = Low
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -6,-9
guard.velocity = -12
air.velocity = -6,-9
airguard.velocity = -3,-3
fall.recover = 0
fall = 1
envshake.time = 6
envshake.ampl = 5
envshake.freq = 140
p2facing = 1
yaccel = 0.60
fall.envshake.time = 15
fall.envshake.freq = 176
fall.envshake.ampl = 5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 3054, Furashu]
type = envcolor
triggerall = numtarget
trigger1 = (animelem = 13 || animelem = 14 || animelem = 15) && movehit
trigger1 = target, movetype = h
value = 225,225,225
time = 4
under = 1
ignorehitpause = 1

[State 1041, Corner_Push]
type = posadd
triggerall = numtarget
triggerall = target, statetype != l
trigger1 = target, backedgedist = 0 && p2dist x < 105
trigger1 = movecontact && animelemtime(15) >= 1
x = -2.5

[State 1041, Corner_Push_No Vel X]
type = velset
triggerall = numtarget
triggerall = target, statetype != l
trigger1 = target, backedgedist = 0 && p2dist x < 90
trigger1 = movecontact && animelemtime(15) >= 1
x = 0

[State 3000, Air-Type]
type = statetypeset
trigger1 = animelemtime(15) >= 1
statetype = A

[State 3000, 7]
type = ChangeState
trigger1 = Vel Y >= 0 && animelemtime(15) > 1
value = 3001
ctrl = 0
;====================================================================
[Statedef 3001]
type    = A
movetype= A
physics = N
juggle  = 4
velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2

[State 3001, Gravity]
type = veladd
trigger1 = 1
y = 0.46

[State 3001, Land]
type = posset
trigger1 = pos y > 0
y = 0

[State 3001, Land]
type = velset
trigger1 = vel y > 0 && pos Y >= 0
y = 0

[State 3001, end]
type = changestate
trigger1 = pos y = 0
value = 1033

;----------------------------------------------------------------------
;Messatsu Gou Hadou
;----------------------------------------------------------------------
[Statedef 3010]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = ifelse(var(7)=0,3010,3011)
ctrl = 0
sprpriority = 2

[State 3010, Messatsu]
type = playsnd
trigger1 = animelem = 4
value = 90,1
volumescale = 100
channel = 1

[State 3010, Muteki]
type = nothitby
trigger1 = !time
value = SCA
time = 15

[State 3015, Shadows]
type = Afterimage
trigger1 = Time = 0
time = 999
length = 21
palbright = 50,50,255
palcontrast = 255,255,255
palpostbright = 50,50,255
PalAdd = -40,-40,0
PalMul = 0.7,0.7,0.7
FrameGap = 10

[State 3010, Pause]
type = Pause
trigger1 = time = 0
time = 11
movetime = 11

[State 3010, Snd 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 122,10
volumescale = 100

[State 3010, Rumble]
type  = envshake
trigger1 = animelem = 4
freq  = 120
time  = 30
ampl  = -4

[State 3010, SuperCharge]
type = Helper
trigger1 = Time = 0
name = "Super"
postype = P1
pos = -31,-46
ownpal = 1
stateno = 3200
size.xscale = 1
size.yscale = 1
id = 3200
supermovetime = 9999

[State 3010, SuperBG]
type = bgpalfx
trigger1 = time = 0
add = -128,-128,-128
time = 45

[State 3010, Super A]
type = SuperPause
trigger1 = AnimElem = 4
pos = -5, -55
anim = -1
sound = s3000, 1
poweradd = -1000
time = 49 ;60
movetime = 45
darken = 0


[State 3010, ChangeState]
type = changestate
trigger1 = time >= 60 && !command = "messcharge"
trigger2 = Var(13) = 1 && time >= 60
value = 3015
ctrl = 0

[State 3010, ChangeState]
type = changestate
trigger1 = time = 120 && command = "messcharge"
trigger2 = Var(13) = 1 && time >= 60
value = 3015
ctrl = 0
;======================================================================
[Statedef 3015]
type    = S
movetype= A
physics = N
juggle  = 4
velset = 0,0
anim = 3015
ctrl = 0
sprpriority = 2

[State 3015, Rumble]
type  = envshake
trigger1 = animelem = 4
freq  = 120
time  = 6
ampl  = -4

[State 3015, DUWUDIYAHH!!!]
type = playsnd
trigger1 = time = 0
value = 50,13
volumescale = 100
channel = 1

[State 3015, Woosh]
type = playsnd
trigger1 = time = 0
value = 130,2
volumescale = 100

[State 3015, Shadows]
type = null;Afterimage
trigger1 = Time = 0
time = 999
length = 21
PalBright   =   0,  0,  0
PalContrast = 128,128,128
PalAdd      =   0,  0,  0
PalMul      =  0.9,0.9,0.9
FrameGap = 10
Trans = Add1

[State 3015, Super C]
type = AfterImageTime
trigger1 = Time = 60
time = 2

[State 3015, Hadouken]
type = Helper
trigger1 = animelem = 4 && time < 10
name = "Mess_Gou_Hadou"
postype = P1
pos = 61,-52
ownpal = 1
stateno = 3016
id = 3016 

[State 3015, ChangeState]
type = changestate
trigger1 = time = 95
value = 0
ctrl = 1

;======================================================================
;Hadouken
;======================================================================
[Statedef 3016]
type    = A
movetype= A
physics = N
sprpriority = 5
velset = 0,0

[State 3005, hitoverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=ifelse(var(2)<8,3016,1003)
ignorehitpause=1

[State 3005,hitby]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 3005, anim]
type=changeanim
trigger1= !time && !prevstateno
value=3017

[State 3005, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 3005, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
var(3)=1
ignorehitpause=1

[State 3005, vel]
type=velset
trigger1= 1
x=ifelse((time<2 && var(2)>1),0,9.8)
y=0

[State 3001, InPlay]
type = parentvarset
trigger1 = time = 0
v = 16
value = 1

[State 3001, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3001, NoJuggle]
type = parentvarset
trigger1 = animtime = 0 && anim = 1003
v = 16
value = 0

[State 3001, Hitdef]
type = HitDef
trigger1 = !time
attr = S, HP
animtype  = hard
damage    = 32, 12
getpower  = 0
priority  = 4
guardflag = M
hitflag = MAF
pausetime = 0,9 ;4,9
guard.pausetime = 0,9
sparkno = s7004
Guard.Sparkno = s7006
sparkxy = 2,-5
hitsound   = -1;s120,6
guardsound = -1
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.7,-8
guard.velocity = -7.5
air.velocity = -4.7,-7
airguard.velocity = -5, -4
yaccel = 0.5
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p1sprpriority = 5


[State 3001, Reset]
type = varset
trigger1 = frontedgedist < -100
trigger2 = backedgedist < -100
trigger3 = parent, var(16) = 0
trigger4 = hitcount = 4
v = 8
value = 0

[State 3001, hcf]
type = parentvarset
trigger1 = winko && movehit
v = 16
value = 1
ignorehitpause = 1

[State 3001, NotInPlay]
type = parentvarset
trigger1 = pos x!=[-240,240]
v = 16
value = 0

[State 3005, end]
type=changestate
trigger1= movecontact
value=ifelse(var(2)<8,3017,3018)
ignorehitpause = 1

[State 3005, end]
type=destroyself
trigger1=pos x!=[-240,240]
;=============================================================
;Projectile Hitpause
;=============================================================
[Statedef 3017]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
anim = 3017
ctrl = 0
sprpriority = 6
hitcountpersist = 1

[State 8100, moveguarded]
type = varset
trigger1 = numtarget
trigger1 = target, stateno = [130,199]
var(30) = 1

[State 3001, hcf]
type = parentvarset
trigger1 = winko
v = 16
value = 1
ignorehitpause = 1

[State 3002, hitspark]
type = null;Explod
trigger1 = time = 0 && !var(30)
anim = 7004
id = 7004
postype = p1
sprpriority = 5
pos = -3, -5
ignorehitpause = 0

[State 1060, GuardSpark]
type = null;Helper
trigger1 = !time && var(30)
trigger1 = frontedgedist > -70
trigger1 = backedgedist > -70
name = "guard"
postype = P1
pos = 0, -25
ownpal = 1
stateno = 8034
id = 8034
supermovetime = 9999
ignorehitpause = 1

[State 3002, Noshadaw]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 3002, movehitSND]
type = playsnd
trigger1 = time = 0 && !var(30)
value = 120,6
ignorehitpause = 0
channel = 6

[State 3002, moveguardSND]
type = playsnd
trigger1 = time = 0 && var(30)
value = 5,0
ignorehitpause = 0
channel = 6

[State 3002, EnterPrevState]
type = changestate
trigger1 = time = 4 && !Var(30)
trigger2 = time = 5 && Var(30)
value = prevstateno

;------------------
;Projectile Disperse
;--------------------
[Statedef 3018]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
anim = 3018
ctrl = 0
sprpriority = 6

[State 3018, NoKage]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3002, movehitSND]
type = playsnd
trigger1 = time = 0 && !var(30)
value = 120,6
ignorehitpause = 0
channel = 6

[State 3002, moveguardSND]
type = playsnd
trigger1 = time = 0 && var(30)
value = 5,0
ignorehitpause = 0
channel = 6

[State 3018, Destroy]
type = destroyself
trigger1 = !animtime

;----------------------------------------------------------------------
;Tenma Gou Zankuu
;----------------------------------------------------------------------
[Statedef 3020]
type    = A
movetype= A
physics = N
juggle  = 4
velset = 0,0
anim = 3020
ctrl = 0
sprpriority = 2

[State 3020, VelSet]
type = velset
trigger1 = animelemtime(9) = 3
Y = -6
X = -2

[State 3020, Gravity]
type = veladd
trigger1 = 1 && animelemtime(9) > 3
Y = 0.30

[State 3020, Effect]
type = playsnd
trigger1 = animelemtime(9) = 2
value = 130,2
volumescale = 100

[State 3020, MMMM!!!]
type = playsnd
trigger1 = time = 0
value = 50,6
volumescale = 100
channel = 1

[State 3020, Gou Zankuu!!]
type = playsnd
trigger1 = animelem=9
value = 50,18
volumescale = 100
channel = 1

[State 3020, SuperCharge]
type = Helper
trigger1 = Time = 0
name = "Super"
postype = P1
pos = 60,-52
ownpal = 1
size.xscale = 1
size.yscale = 1
stateno = 3200
id = 3200
supermovetime = 9999

[State 3020, SuperBG]
type = bgpalfx
trigger1 = time = 0
add = -128,-128,-128
time = 45

[State 3020, Super A]
type = SuperPause
trigger1 = Time = 0
pos = 60, -65
anim = -1
sound = s3000,1
poweradd = -1000
time = 71
movetime = 71
darken = 0

[State 3020, Shadows]
type = null;Afterimage
trigger1 = Time = 0
time = 999
length = 21
PalBright   =   0,  0,  0
PalContrast = 128,128,128
PalAdd      =   0,  0,  0
PalMul      =  0.9,0.9,0.9
FrameGap = 10
Trans = Add1

[State 3050, Blue Shadows]
type = Afterimage
trigger1 = Time = 0
time = 999
length = 21
palbright = 50,50,255
palcontrast = 255,255,255
palpostbright = 50,50,255
PalAdd = -40,-40,0
PalMul = 0.7,0.7,0.7
FrameGap = 10

[State 3020, Tenma]
type = null;Helper
trigger1 = AnimElemtime(9) = 2
name = "Tenma"
postype = P1
pos = 50,-53
ownpal = 1
stateno = 3021
id = 3021

[State 3020, Projectile]
type = Projectile
trigger1 = animelemtime(9) = 2
ProjID = 3021
projanim = 3021
projhitanim = 3026
projremanim = 3026
projscale = 1,1
projremove = 1
projremovetime = -1
velocity =5.6,3.6
remvelocity = 0,0
accel = 0,0
projhits = 8
projmisstime = 0
projpriority = 1
offset = 50,-53
postype = P1         ;P2, Front, Back, Left, Right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
;---------------------------
attr = S,HP
hitflag = MAF
guardflag = M
animtype = Hard
priority = 5,hit
damage = 27,8 ;20,8
sparkno = s7004
guard.sparkno = s7006
sparkxy = 15,15
hitsound = s120,6
guardsound = s5,0
pausetime = 3,12 ;12
guard.pausetime = 3,12
ground.hittime = 18
air.hittime = 18
getpower = 0
ground.velocity= -7.3,5
ground.type = Low
air.velocity= -7.3,5
ground.slidetime = 18
palfx.time = 40 ;20
palfx.add = 217,61,0
palfx.sinadd = -255,-255,-255,80 ; 40
palfx.color = 20
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0



[State 3020, set]
type = posset
trigger1 = pos y > 0
y = 0

[State 3020, 5]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y = 0
value = 1090

;====================================================================
;Gou Zankuu
;====================================================================
[Statedef 3021]
type    = A
movetype= A
physics = N
juggle  = 6
velset = 8.7,4.6
anim = 3021
ctrl = 0
sprpriority = 5

[State 3021, HitVel]
type = null
trigger1 = MoveContact
X = 1
Y = 1

[State 3016, HitVel]
type = velset
triggerall = numtarget
trigger1 = (movecontact || prevstateno) && p2dist x <= 5
X = 1
y = 1


[State 3021, NoHitVel]
type = Velset
trigger1 = 1 && !MoveContact
X = 8.7
Y = 4.6

[State 3021, InPlay]
type = parentvaradd
trigger1 = time = 0
v = 16
value = 1

[State 3021, Resistance]
type = parentvaradd
trigger1 = time = 0
v = 15
value = -1

[State 3021, Set]
type = posset
trigger1 = Pos Y > 4
y = 4

[State 3021, Set]
type = velset
trigger1 = Pos Y > 4 && vel Y > 0
y = 4

[State 3021, PushEnable]
type = playerpush
trigger1 = MoveHit
value = 1

[State 3021, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3021, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 3021
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 3021, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 3016, HitDef]
type = HitDef
trigger1 = Time >= 0 && uniqhitcount < Parent, Var(15)
attr = S,HP
hitflag = MAF
guardflag = M
animtype = Hard
priority = 5,hit
damage = 27,8 ;20,8
sparkno = s7004
guard.sparkno = s7006
sparkxy = -10,-15
hitsound = s120,10
guardsound = s5,0
pausetime = 3,12 ;12
guard.pausetime = 6,14
ground.hittime = 18
air.hittime = 18
ground.velocity=ifelse(uniqhitcount<Parent,Var(15),-7.3,-8.5),ifelse(uniqhitcount < Parent, Var(15),5,4.5)
ground.type = Low
air.velocity=ifelse(uniqhitcount<Parent, Var(15),-7.3,-8.5),ifelse(uniqhitcount< Parent, Var(15),5,5.5)
ground.slidetime = 18
palfx.time = 40 ;20
palfx.add = 217,61,0
palfx.sinadd = -255,-255,-255,80 ; 40
palfx.color = 20
fall = 1
envshake.time = 6
envshake.ampl = -6 ;up and down
envshake.freq = 120;speed
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 3021, Depreciate]
type = ChangeState
trigger1 = moveguarded
value = 3021
ctrl = 0

[State 3021, End]
type = ChangeState
trigger1 = Pos Y = 4
trigger2 = uniqhitcount = Parent, Var(15)
;trigger3 = Var(12) <= 0
value = 1142
ctrl = 0

;--------------------------------------------------------------------
;Shun Goku Satsu
;--------------------------------------------------------------------
[Statedef 3050]
type    = S
movetype= A
physics = N
juggle  = 6
velset = 0,0
anim = ifelse(Var(7)=0,3100,3101)
ctrl = 0
sprpriority = 2

[State 3020, SuperCharge]
type = Helper
trigger1 = Time = 0
name = "Super"
postype = P1
pos = 20,-90
ownpal = 1
stateno = 3200
id = 3200
supermovetime = 9999

[State 3050, FlameCharge]
type = explod
trigger1 = time = 0
anim = 3201
postype = p1
pos = 19,-86
supermovetime = 64
sprpriority = 3
ownpal = 1

[State 3050, RedBG]
type = bgpalfx
trigger1 = time = 0
add = 255,0,0
time = 160
sinadd = -255,-255,-255,240

[State 3050, Super A]
type = SuperPause
trigger1 = Time = 0
pos = -5, -55
anim = -1
sound = s3000,1
poweradd = -3000
time = 64
darken = 0

[State 3050, Taunt]
type = Playsnd
trigger1 = time = 0
value = 80,6
volumescale = 100
channel = 1

[State 3050, Effect]
type = Playsnd
trigger1 = time = 2
value = 130,0
volumescale = 100

[State 3050, VelSet]
type = Velset
trigger1 = time = 0
X = ifelse(Var(7)=0,6,7.3)

[State 3050, Red Shadows]
type = null; Afterimage
trigger1 = Time = 0
time = 999
length = 30
PalPostBright = 0,0,0
PalContrast = 160,20,20
PalAdd      =   0, 0, 0
PalMul      =  0.9 ,0.9 ,0.9
FrameGap = 10
Trans = Add1

[State 3050, Red Shadows]
type = Afterimage
trigger1 = Time = 0
time = 999
length = 15
PalPostBright = 0,0,0
PalContrast = 160,20,20
PalAdd      =   0, 0, 0
PalMul      =  1.5 ,1.5 ,1.5
FrameGap = 5

[State 3050, IGrabU]
type = HitDef
Trigger1 = Time = 0
attr = S, HA
hitflag = M
sparkno = -1 
p1sprpriority = 1
p2facing = 1 
p1stateno = 3102
p2stateno = 3103
guard.dist = 0
fall = 1

[State 3050, AfterImageCancel]
type = AfterImageTime
trigger1 = time = 57
time = 3

[State 3050, RedBG]
type = bgpalfx
trigger1 = time = 60
add = 255,0,0
time = 1
sinadd = -255,-255,-255,240

[State 3050, End]
type = ChangeState
trigger1 = time = 60
value = 0
ctrl = 1

;====================================================================
;Gouki State
;====================================================================
[Statedef 3102]
type    = S
movetype= A
physics = N
juggle  = 6
velset = 0,0
anim = 3102
ctrl = 0
sprpriority = 5

[State 3102, Grab]
type = playsnd
trigger1 = time = 0
value = 110,0
volumescale = 100
freqmul = 1.5

[State 3102, Voice]
type = playsnd
trigger1 = time = 25
value = 50,12
volumescale = 100
channel = 1

[State 3102, AfterImageCancel]
type = AfterImageTime
trigger1 = time = 0
time = 3

[State 3102 Blackout]
type = bgpalfx
trigger1 = time = 0
add = 0,0,0
time = 60
sinadd = 255,255,255,190

[State 3102, blackout]
type = envcolor
trigger1 = Time > 31 && time <= 135
time = 4
value = 255, 255, 255
under = 1

[State 3102 CharBlackout]
type = AssertSpecial
trigger1 = time > 40 && animelemtime(2) < 0
flag = Invisible
flag2 = noFG

[State 3102 CharBlackout]
type = palfx
trigger1 = time = 20
add = 0,0,0
time = 60
sinadd = 255,255,255,190

[State 3102, Bind 1]
type = TargetBind
trigger1 = time = 0
pos = 35, 0

[State 3102, Hitsound]
type = playsnd
trigger1 = time=50||time=55||time=60||time=65||time=70||time=75||time=80||time=90||time=95||time=100||time=105||time=110||time=115||time=120||time=125||time=130
value = 120,6
volumescale = 100
channel = 6; ifelse(random > 500,2,3)

[State 3102, Rumble]
type  = envshake
trigger1 =time=50||time=55||time=60||time=65||time=70||time=75||time=80||time=90||time=95||time=100||time=105||time=110||time=115||time=120||time=125||time=130
freq  = 120
time  = 30
ampl  = -4

[State 3102, Hit]
type = targetlifeadd
trigger1 =time=50||time=55||time=60||time=65||time=70||time=75||time=80||time=90||time=95||time=100||time=105||time=110||time=115||time=120||time=125
value = -ceil(((target,lifemax)*0.47)/17)
kill = 0

[State 3102, Hitadd]
type = hitadd
trigger1 = time=50||time=55||time=60||time=65||time=70||time=75||time=80||time=90||time=95||time=100||time=105||time=110||time=115||time=120||time=125||time = 130
value = 1

[State 3102,Final]
type = targetlifeadd
trigger1 = time = 130
value = -160

[State 3102,hitspark1]
type = explod
trigger1 = time = 50
anim = 7004
postype = p2
pos = 30,-110
ownpal = 1
sprpriority = 5

[State 3102,hitspark2]
type = explod
trigger1 = time = 55
anim = 7004
postype = p2
pos = -20,-40
ownpal = 1
sprpriority = 5

[State 3102,hitspark3]
type = explod
trigger1 = time = 60
anim = 7004
postype = p2
pos = 25,-70
ownpal = 1
sprpriority = 5

[State 3102,hitspark4]
type = explod
trigger1 = time = 65
anim = 7004
postype = p2
pos = -25,-100
ownpal = 1
sprpriority = 5

[State 3102,hitspark5]
type = explod
trigger1 = time = 70
anim = 7004
postype = p2
pos = 15,-20
ownpal = 1
sprpriority = 5

[State 3102,hitspark6]
type = explod
trigger1 = time = 75
anim = 7004
postype = p2
pos = 70,-65
ownpal = 1
sprpriority = 5

[State 3102,hitspark7]
type = explod
trigger1 = time = 80
anim = 7004
postype = p2
pos = 100,-87
ownpal = 1
sprpriority = 5

[State 3102,hitspark8]
type = explod
trigger1 = time = 85
anim = 7004
postype = p2
pos = -30,-120
ownpal = 1
sprpriority = 5

[State 3102,hitspark9]
type = explod
trigger1 = time = 90
anim = 7004
postype = p2
pos = 50,-130
ownpal = 1
sprpriority = 5

[State 3102,hitspark10]
type = explod
trigger1 = time = 95
anim = 7004
postype = p2
pos = 55,-30
ownpal = 1
sprpriority = 5

[State 3102,hitspark11]
type = explod
trigger1 = time = 100
anim = 7004
postype = p2
pos = 2,-40
ownpal = 1
sprpriority = 5

[State 3102,hitspark12]
type = explod
trigger1 = time = 105
anim = 7004
postype = p2
pos = -60,-65
ownpal = 1
sprpriority = 5

[State 3102,hitspark13]
type = explod
trigger1 = time = 110
anim = 7004
postype = p2
pos = 42,-22
ownpal = 1
sprpriority = 5

[State 3102,hitspark14]
type = explod
trigger1 = time = 115
anim = 7004
postype = p2
pos = 10,-80
ownpal = 1
sprpriority = 5

[State 3102,hitspark15]
type = explod
trigger1 = time = 120
anim = 7004
postype = p2
pos = -20,-96
ownpal = 1
sprpriority = 5

[State 3102,hitspark16]
type = explod
trigger1 = time = 125
anim = 7004
postype = p2
pos = -45,-20
ownpal = 1
sprpriority = 5

[State 3102,hitspark17]
type = explod
trigger1 = time = 130
anim = 7004
postype = p2
pos = 0,-70
ownpal = 1
sprpriority = 5

[State 3102, EndWin]
type = ChangeState
trigger1 = time = 131 && target,life <= 0
value = 3110
ctrl = 1

[State 3102, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;======================================================================
;Victim State
;======================================================================
[Statedef 3103]
type    = S
movetype= H
physics = N
juggle  = 6
velset = 0,0
ctrl = 0
sprpriority = -1

[State 3103,Blackout]
type = AssertSpecial
trigger1 = time > 40 && Time < ifelse(life > 0,135,131)
flag = Invisible

[State 3103, ChangeAnim]
type = changeanim2
trigger1 = life <= 0 && time = 131
value = 3103
elem = 2

[State 3103, CharBlackout]
type = palfx
trigger1 = time = 20
add = 0,0,0
time = 60
sinadd = 255,255,255,190

[State 3103, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3103

[State 3103, EndSurvive]
type = selfstate
trigger1 = time = 300 && life > 0
value = 5120
ctrl = 0

[State 3103, EndDead]
type = selfstate
trigger1 = time = 300 && life <= 0
value =5150
ctrl = 0
;======================================================================
;WinState
;======================================================================
[Statedef 3110]
type    = S
movetype= A
physics = N
juggle  = 6
velset = 0,0
anim = 3110
ctrl = 0
sprpriority = 4

[State 3110, BlackBg]
type = envcolor
triggerall = Var(2) = 0
trigger1 = time = 0
value = 0,0,0
under = 1
time = 260

[State 3110 Blackout]
type = AssertSpecial
triggerall = Var(2) = 0
trigger1 = time >= 0 && time < 260
flag = NoFG

[State 3110, Taunt]
type = playsnd
triggerall = Var(2) = 0
trigger1 = time = 10
value = 80,9
volumescale = 100
channel = 1

[State 3110, Kri]
type = playsnd
triggerall = Var(2) = 0
trigger1 = time = 0
value = 122,9
volumescale = 100

[State 3110,BigKanji]
type = explod
triggerall = Var(2) = 0
trigger1 = time = 0 && var(7) = 0
anim = 3104
postype = left
pos = 0,0
ownpal = 1
sprpriority = -5
removetime = 260

[State 3110,BigKanji2]
type = explod
triggerall = Var(2) = 0
trigger1 = time = 0 && var(7) = 1
anim = 3105
postype = left
pos = 20,-9
ownpal = 1
sprpriority = -5
removetime = 265

[State 183, Ten]
type = explod
triggerall = Var(2) = 0
trigger1 = animelem = 1 && facing = 1 && Var(7) = 0
anim = 3106
postype = p1
pos = 1,-8
sprpriority = 5

[State 183, Shin]
type = explod
triggerall = Var(2) = 0
trigger1 = animelem = 1 && facing = 1 && Var(7) = 1
anim = 3108
postype = p1
pos = 1,-7
sprpriority = 5

[State 183, Ten(Turn)]
type = explod
triggerall = Var(2) = 0
trigger1 = animelem = 1 && facing = -1 && Var(7) = 0
anim = 3107
postype = p1
pos = -2,-9
sprpriority = 5

[State 183, Shin(Turn)]
type = explod
triggerall = Var(2) = 0
trigger1 = animelem = 1 && facing = -1 && Var(7) = 1
anim = 3109
postype = p1
pos = -2,-7
sprpriority = 5


[State 3110, SpecialCond]
type = varset
trigger1 = time = 190 && Var(2) = 0 ;11
v = 2
value = 1

[State 3110, End]
type = ChangeState
trigger1 = Time = 190 ;290
value = 180
ctrl = 1
;======================================================================
;superspark
[statedef 3200]
type = S
movetype = I
physics = N
anim = 3200
sprpriority = 5

[state 3200, spr]
type = sprpriority
trigger1 = 1
value = 5

[State 3200, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[state 3200, bind]
type = BindToParent
trigger1 = parent, stateno = 3010
pos = -31,-46

[state 3200, bind]
type = BindToParent
trigger1 = parent, stateno = 3000
pos = 23,-47

[state 3200, bind]
type = BindToParent
trigger1 = parent, stateno = 3020
pos = 60, -52

[state 3200, trans]
type = Trans
trigger1 = 1
trans = add

[state 3200, Angle0]
type = AngleSet
trigger1 = time
value = (360*time)/39

[state 7030, Angle1]
type = AngleDraw
trigger1 = 1
scale = 0.4,0.4

[state 3200, end]
type = DestroySelf
trigger1 = !animtime;time = 43
;======================================================================
; K.O Effect
;======================================================================
[Statedef 9000]
type    = S
physics = S
anim = -1
ctrl = 0

[State 9000, NHB]
type = nothitby
trigger1 = 1
value = SCA

[State 9000, Invis]
type = assertspecial
trigger1 = 1
flag = invisible

[State 9000, hgf]
type = assertspecial
triggerall = 1 && time  < 47
trigger1 = parent,hitdefattr = SCA, HA
trigger2 = parent, Var(16) = 1
trigger3 = numexplod(7000) = 1
flag = nobg
flag2 = nobardisplay
flag3 = nofg

[State 3020, Special K.O Effect]
type = bgpalfx
trigger1 = time = 0 && (parent, hitdefattr = SCA, SA || parent,var(18))
;trigger2 = numexplod(7000) && time = 46
add = 255,255,255
sinadd = -255,-255,-255,170
time = 45

[State 3020, Dramatic Freeze]
type = null;pause
trigger1 = time = 0 && parent, stateno != 3110
time = 25
ignorehitpause = 1

[State 3020, Dramatic Sound]
type = playsnd
trigger1 = time = 0
value = 3000,2
ignorehitpause = 1
volumescale = 100

[State 9000, kablewy!]
type = playsnd
triggerall = time = 0
trigger1 = parent, hitdefattr = SCA, HA
trigger2 = parent, Var(16) = 1
value = 3000,6
volumescale = 100

[State 9000, kablewy!]
type = playsnd
triggerall = time = 5
trigger1 = parent, hitdefattr = SCA, HA
trigger2 = parent, Var(16) = 1
value = 3000,7
volumescale = 100

[State 2010, HyperComboFinish!]
type = Explod
triggerall = time = 0 && numexplod(7000)= 0
trigger1 = parent, hitdefattr = SCA, HA
trigger2 = parent, Var(16) = 1
anim = 7000
id = 7000
postype = left
bindtime = 99999
pos = 0,0
sprpriority = -5
scale = 0.5,0.5
;----------------------------------------------------------------------
; Override common states (use same number to override) :
;----------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = N
anim = 100
sprpriority = 1
ctrl = 0

[State 100, AssumingDirectControl]
type = ctrlset
trigger1 = time = 5
value = 1

[State 100, 1]
type = VelSet
trigger1 = time = 0
x = 8

[State 100, 1]
type = Veladd
trigger1 = time > 15
x = -0.30

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = Vel X <= 0
value = 0
;----------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = S
physics = N
anim = 105
sprpriority = 1
ctrl = 0

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = -8

[State 105, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 105, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 105, 1]
type = Veladd
trigger1 = 1
x = 0.30

[State 105, 3]
type = ChangeState
trigger1 = Vel X >= 0 ;&& time  > 1
value = 0
ctrl = 1
;----------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
velset =0,0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, Cpu_velset]
type = velset
triggerall = var(13) 
trigger1 = P2dist X > 100 && enemy,numproj = 0
x = 4

[State 40, Cpu_velset]
type = velset
triggerall = var(13) 
trigger1 = P2dist X < 100 && enemy,numproj = 0
trigger1 = enemynear,statetype = L
x = ifelse(random > 500,-4,4)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, Turn]
type = turn
trigger1 = !time&&p2dist x<0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 52, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------
; Override common states (use same number to override) :
;--------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = 40,1

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;--------------------------------------------------------------------
; HIT_LIEDOWN
;--------------------------------------------------------------------
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 40,1

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine
;----------------------------------------------------------------------
; States that are always executed (use statedef -2)
;----------------------------------------------------------------------
[Statedef -2]

[State -2, Debug data]
type = displaytoclipboard
trigger1 = time >= 0
text = "Var(11) =%d,P2Dist X = %f,P2Dist Y = %f,backedgedist = %f,facing = %d, Damage Scale =%f,By Master Gouken"
params = Var(11),P2Dist X,P2Dist Y,backedgedist, facing, fvar(1)

[State -2, ReSetDampener]
type = VarSet
trigger1 = (P2MoveType != H) && (Var(0) > 0)
var(0) = 0

[State -2, Dizzy Groan]
type = PlaySnd
triggerall = Time = 1
triggerall = Alive = 1
trigger1 = Anim = 5300
value = 60, 5

[State -2, K.O!]
type = Helper
trigger1 = winko && numhelper(9000)=0
name = "KO"
postype = P1
pos = 38,0
ownpal = 1
stateno = 9000
id = 9000
ignorehitpause = 1

[State -2, RemoveAfterImages]
type = AfterImageTime
trigger1 = movetype = h &&!time ;on hit
trigger2 = stateno = 0
Time = 0

[State -2, Damage based on hits]
type=varset
trigger1= numenemy
fvar(1)= ifelse(enemynear,gethitvar(hitcount)<2, 24, ifelse(enemynear,gethitvar(hitcount)>=24, 2, 28-enemynear,gethitvar(hitcount))) / 34.0
ignorehitpause=1

[State -2, Reset var when the opponent recovers]
type=varset
trigger1= numenemy
trigger1= (enemynear,movetype!=H)
trigger2= !numenemy
fvar(1)=1

[State -2, Dampener itself]
type=attackmulset
trigger1= 1
value=fvar(1)
ignorehitpause=1

;----------------------------------------------------------------------
; States that are executed when in self's state file (use statedef-3)
;----------------------------------------------------------------------

[Statedef -3]

[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = 40, 0

[State -3, Landing Vel]
type = velset
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
x = 0

[State -3, Juggle Reset]
type = varset
trigger1 = p2movetype != H
v = 17
value = 8

[State -3,Shakunetsu De-activate]
type = Varset
trigger1 = Stateno >= 5000
v = 10
value = 0

[State -3,Shin Gouki]
type = Varset
trigger1 = !var(7) && Palno > 6
v = 7
value = 1

;------------------------------------------------
[State -3, Corner Push]; Reset
type= varset
trigger1= fvar(5)
trigger1= numtarget
trigger1= (target, hitover) || (target, gethitvar(hitshaketime) > 0 && target, time <= 0)
fvar(5)= 0

[State -3, Corner Push]; Get initial velocity
type= varset
triggerall = stateno != 3000
trigger1= movecontact=1 && numtarget
fvar(5)= (target, gethitvar(xvel))
ignorehitpause= 1

[State -3, Corner Push]; Apply corner push
type= posadd
triggerall= fvar(5)
triggerall = stateno != 3000
triggerall= (statetype = S || statetype = C) && numtarget
triggerall= !hitpausetime && (target, gethitvar(hitshaketime) <= 0)
triggerall= (target, statetype = S || target, statetype = C) && !(target, gethitvar(yvel)) && !(target, hitfall); See note below
trigger1= target, frontedgebodydist <= abs(target, vel x)
trigger1= (target, gethitvar(xvel) * target, facing) > 0
trigger2= target, backedgebodydist <= abs(target, vel x)
trigger2= (target, gethitvar(xvel) * target, facing) < 0
x= ifelse(target, frontedgebodydist <= 0, -1, 1) * (target, facing) * fvar(5)

[State -3, Corner Push]; Apply friction to the velocity
type= varset
triggerall = stateno != 3000
trigger1= numtarget
trigger1= target, gethitvar(hitshaketime) <= 0
fvar(5)= fvar(5) * 0.85
;-----------------------------------------------------------------

[State -3,limit]
type = Varadd
triggerall = Var(13) = 1
trigger1 = (stateno = 1030 ||stateno = 1031 || stateno = 1035|| stateno = 1036 || stateno = 1040 || stateno = 1041) && movehit
v = 14
value = 1

[State -3,Endlimit]
type = Varset
triggerall = Var(13) = 1
trigger1 = enemynear,statetype = L
v = 14
value = 0

[State -3, MGHDepreciate] ;Adjust to affect MGH and TGZ hitcount
type = Varset
trigger1 = Var(16) = 0
v = 15
value = 9 ;13

[State -3,Shaku.Lv1]
type = Varset
trigger1 = Var(11) = 0 && command = "metsu1"
v = 4
value = 2

[State -3,Shaku.Lv2]
type = Varset
trigger1 = Var(11) = 0 && command = "metsu2"
v = 4
value = 3

[State -3,Shaku.Lv3]
type = Varset
trigger1 = Var(11) = 0 && command = "metsu3"
v = 4
value = 4

[State -3, Randomizer]
type = varRandom
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5100
v = 8
range = 1,2

[State -3, GetHurt Sound]
type = PlaySnd
triggerall = Random < 330
triggerall = Time = 1
triggerall = Alive = 1
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 
trigger2 = prevstateno = [1000,4999]
trigger2 = movetype = h
value = 60, var(8)
channel = 1

[State -3, Fall hit sound]
type = playsnd
triggerall = Time = 1
triggerall = Alive = 1
trigger1 = StateNo = 5100 && Random < 500
value = 60,ifelse(random > 500,0,4)

[State -3, Ground Hit]
type = PlaySnd
triggerall = Random < 330
triggerall = Time = 1
triggerall = Alive = 1
trigger1 = StateNo = 5080
value = 60, 3

[State -3, Weaken]
type = AttackMulSet
trigger1 = hitcount >= 5 && hitcount < 10 && stateno < 3000
value = 0.3

[State -3, Weaken]
type = AttackMulSet
trigger1 = hitcount >= 10 && stateno < 3000
value = 0.1

[State -3, Strengthen]
type = AttackMulSet
trigger1 = hitcount = 0
value = 1

[State -3, BeefUp]
type = AttackMulSet
trigger1 = p2name = "Broly 'le cauchemar' super saiyen nv3"
trigger2 = p2name = "Broly mode soft" 
value = 2.5

[State -3, BeefUp]
type = DefenceMulSet
trigger1 = p2name = "Broly 'le cauchemar' super saiyen nv3"
trigger2 = p2name = "Broly mode soft" 
value = 10

[State -3, AI]
type = varset
trigger1 = !var(13) && roundstate = 2 && Ailevel
v = 13
value = 1
